if (undefined === window.Kameleoon){Kameleoon={load:function(){Kameleoon.Analyst.load()},loadSiteProfile:function(){},runWhenElementPresent:function(a,c,b){Kameleoon.API.runWhenElementPresent(a,c,b)},runWhenConditionTrue:function(b,c,a){Kameleoon.API.runWhenConditionTrue(b,c,a)},processRedirect:function(a){Kameleoon.API.processRedirect(a)},triggerEvent:function(a){Kameleoon.API.triggerEvent(a)},processConversion:function(a,b){Kameleoon.API.processConversion(a,b)},processOmniture:function(a){Kameleoon.API.processOmniture(a)}};Kameleoon.API={runWhenElementPresent:function(a,c,b){var d=Sizzle(a);if(0<d.length){Kameleoon.Utils.runProtectedFunction(c)}else{if(!Kameleoon.Internals.pageLoaded){window.setTimeout(function(){Kameleoon.API.runWhenElementPresent.apply(Kameleoon,[a,c,b])},b?b:200)}}},runWhenConditionTrue:function(b,c,a){if(b()){Kameleoon.Utils.runProtectedFunction(c)}else{if(!Kameleoon.Internals.pageLoaded){window.setTimeout(function(){Kameleoon.API.runWhenConditionTrue.apply(Kameleoon,[b,c,a])},a?a:200)}}},processRedirect:function(b,a){if(window.location.href!=b){if(Kameleoon.Internals.configuration.googleAnalytics&&1==Kameleoon.API.currentVisit.pageViews){b=Kameleoon.Utils.addParameterToURL(b,"utm_referrer="+encodeURIComponent(document.referrer),Kameleoon.Internals.configuration.googleAnalyticsAllowAnchor)}if(a){b=Kameleoon.Utils.addParameterToURL(b,"kameleoonAVTE-"+Kameleoon.API.currentContainer.id+"="+Kameleoon.API.currentContainer.registeredVariation.id,true);b=Kameleoon.Utils.addParameterToURL(b,"kameleoonRedirect-"+Kameleoon.API.currentContainer.id+"=true",true)}if(window.location.href!=b){Kameleoon.Utils.createLocalData("kameleoonRedirect-"+Kameleoon.API.currentContainer.id,window.location.href,1,null,null,false);Kameleoon.API.forceNoFlicker("*");Kameleoon.Analyst.applyRedirect=true;window.location.replace(b)}}},triggerEvent:function(a){Kameleoon.API.events.push(a);Kameleoon.Analyst.processAllContainers()},processConversion:function(k,g){for(var f=0,d=Kameleoon.Internals.configuration.goals.length;f<d;++f){if(Kameleoon.Internals.configuration.goals[f].id==k||Kameleoon.Internals.configuration.goals[f].name==k){if(Kameleoon.Internals.gathererRun){Kameleoon.Gatherer.trackConversion(Kameleoon.Internals.configuration.goals[f].id)}for(var e=0,c=Kameleoon.API.experiments.length;e<c;++e){var a=Kameleoon.API.experiments[e];if(a.simulationMode){continue}if("ENGAGEMENT"==Kameleoon.Internals.configuration.goals[f].type&&a.noEngagement){a.noEngagement=false;continue}var h=Kameleoon.Utils.readLocalData("kameleoonExperimentTracking-"+a.id,null,true);if(h&&h.visit&&(!h["KAMELEOON_"+Kameleoon.Internals.configuration.goals[f].id]||Kameleoon.Internals.configuration.goals[f].multipleConversions)){if(!a.registeredVariation){Kameleoon.Analyst.performVariationAssignment(a,true)}var b=Kameleoon.Internals.ABTESTING_TRACKING_URL+"siteCode="+Kameleoon.Internals.siteCode+"&memberCode="+Kameleoon.Internals.memberCode+"&experimentId="+a.id+"&variationId="+a.registeredVariation.id+"&event=conversion&goalId="+Kameleoon.Internals.configuration.goals[f].id;if(g){b+="&revenue="+g}Kameleoon.Utils.performBeaconServerCall(b);h["KAMELEOON_"+Kameleoon.Internals.configuration.goals[f].id]=true;Kameleoon.Utils.createLocalData("kameleoonExperimentTracking-"+a.id,h,a.cookieDuration?a.cookieDuration:30,a.cookieDomain,null,true)}}}}},processOmniture:function(d){if(Kameleoon.API.experiments){for(var c=0,b=Kameleoon.API.experiments.length;c<b;++c){var a=Kameleoon.API.experiments[c];if(a.adobeOmnitureTracking&&a.adobeOmnitureTracking.active){if(a.adobeOmnitureTracking.omnitureAlreadyLoaded){d.linkTrackVars=((!d.linkTrackVars||"None"==d.linkTrackVars)?"":(d.linkTrackVars+","))+"eVar"+a.adobeOmnitureTracking.eVar}d["eVar"+a.adobeOmnitureTracking.eVar]=a.name+" / "+a.registeredVariation.name}}}},waitToProcessElements:function(b,d){if(!(b instanceof Array)){b=[b]}var e=[];for(var h=0,c=b.length;h<c;++h){var g=null;for(var f=0,a=Kameleoon.Internals.pageElementSets.length;f<a;++f){if(Kameleoon.Internals.pageElementSets[f].selector==b[h]){g=f;break}}if(null!==g){e.push(Kameleoon.Internals.pageElementSets[g])}}if(!Kameleoon.Analyst.setupDOMStructure({elementSets:e},false,false,false)&&!Kameleoon.Internals.pageLoaded){window.setTimeout(function(){Kameleoon.API.waitToProcessElements.apply(Kameleoon,[b,d])},d?d:200)}},forceNoFlicker:function(c){var b=document.createElement("style");b.setAttribute("id","kameleoonPageLoading");b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");b.setAttribute("media","screen");var a=c+" { visibility: hidden !important; }";if(b.styleSheet){b.styleSheet.cssText=a}else{b.appendChild(document.createTextNode(a))}Kameleoon.Internals.headNode.appendChild(b)},refresh:function(){Kameleoon.Analyst.refreshForScreenResize()},loadScriptSequentially:function(b){if(b){var a=document.createElement("script");a.src=b;a.setAttribute("onload","Kameleoon.API.loadScriptSequentially();");Kameleoon.Internals.waitingScripts.push(a);if(1==Kameleoon.Internals.waitingScripts.length){Kameleoon.Internals.headNode.appendChild(Kameleoon.Internals.waitingScripts[0])}}else{Kameleoon.Internals.waitingScripts.shift();if(0<Kameleoon.Internals.waitingScripts.length){Kameleoon.Internals.headNode.appendChild(Kameleoon.Internals.waitingScripts[0])}}},processPageLoaded:function(){Kameleoon.Internals.pageLoaded=true;var c=document.getElementById("kameleoonPageLoading");if(c){c.parentNode.removeChild(c)}for(var b=0,a=Kameleoon.Internals.configuration.variations.length;b<a;++b){if(Kameleoon.Internals["enginePollerForVariation"+Kameleoon.Internals.configuration.variations[b].id]){window.clearInterval(Kameleoon.Internals["enginePollerForVariation"+Kameleoon.Internals.configuration.variations[b].id]);Kameleoon.Internals["enginePollerForVariation"+Kameleoon.Internals.configuration.variations[b].id]=null}}}};Kameleoon.Analyst={load:function(){if(window.kameleoonDisplayPage){try{window.kameleoonDisplayPage()}catch(a){}window.clearTimeout(window.kameleoonDisplayPageTimeOut)}this.setupKameleoon(Kameleoon.Internals.configuration.siteCode,Kameleoon.Internals.configuration.memberCode)},setupKameleoon:function(a,d){Kameleoon.Internals.unsupportedBrowser=/MSIE (6|7)/.test(navigator.userAgent);Kameleoon.Internals.internetExplorer=!!(window.attachEvent&&!window.opera);Kameleoon.Internals.oldInternetExplorer=/MSIE 8/.test(navigator.userAgent);Kameleoon.Internals.modernInternetExplorer=/MSIE 10/.test(navigator.userAgent);Kameleoon.Internals.webKit=/webkit\/(\d+)/i.test(navigator.userAgent);Kameleoon.Internals.firefox=/Firefox/i.test(navigator.userAgent);Kameleoon.Internals.parameters=Kameleoon.Utils.parseParameters();if(this.shouldAbortSetup()){return}Kameleoon.Internals.headNode=document.getElementsByTagName("head")[0];Kameleoon.Internals.waitingScripts=[];Kameleoon.Internals.pageElementSets=[];Kameleoon.Internals.editorMode=("true"==Kameleoon.Internals.parameters.kameleoon);Kameleoon.Internals.disableCache=("true"==Kameleoon.Internals.parameters.kameleoonDisableCache)||Kameleoon.Internals.parameters.kameleoonVariationId;Kameleoon.Internals.QOOXDOO_ESTIMATED_LOADING_TIME=2000;Kameleoon.Internals.SERVER_CALL_ESTIMATED_LOADING_TIME=500;Kameleoon.Internals.GUI_ESTIMATED_LOADING_TIME=3000;Kameleoon.Internals.DOMAIN="kameleoon.com";Kameleoon.Internals.BASE_EDITOR_URL="//static."+Kameleoon.Internals.DOMAIN+"/js/editor/";Kameleoon.Internals.JS_EDITOR_URL=Kameleoon.Internals.BASE_EDITOR_URL+"script/editor.js";Kameleoon.Internals.EDITOR_HOST_NAME="editor";Kameleoon.Internals.ABTESTING_TRACKING_URL="//server1.analyst.kameleoon.com/_.gif?";Kameleoon.Internals.PAGE_LOADING_POLL_DELAY=75;Kameleoon.Internals.PAGE_LOADED_POLL_DELAY=250;Kameleoon.Internals.siteCode=a;Kameleoon.Internals.memberCode=d;Kameleoon.API.personalizations=Kameleoon.Internals.configuration.personalizations;Kameleoon.API.activePersonalizations=[];if(Kameleoon.Internals.parameters.kameleoonVariationId){Kameleoon.Internals.configuration.variations=[{id:"reference",name:"Reference",builtCssCodeLevel2:"",elementSets:[]}];Kameleoon.API.personalizations.push({id:"",name:"Visualization",targetingSegment:{},variation:{name:"",id:Kameleoon.Internals.parameters.kameleoonVariationId}});if(Kameleoon.Internals.parameters.kameleoonHeatMap){var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("charset","utf-8");c.setAttribute("src",window.location.protocol+"//tracker.kameleoon.com:"+(window.location.protocol=="https:"?"8443":"8080")+"/tracker/heatMap/obtainHeatMapScript?siteCode="+a+"&variationId="+Kameleoon.Internals.parameters.kameleoonVariationId+"&experimentId="+Kameleoon.Internals.parameters.kameleoonExperimentId+"&pageWidth="+Kameleoon.Internals.parameters.kameleoonPageWidth);Kameleoon.Internals.headNode.appendChild(c)}}if(window.parent){Kameleoon.Internals.editorMode=Kameleoon.Internals.editorMode||(window.parent.location.search&&-1!=window.parent.location.search.indexOf("kameleoon=true"))}if(Kameleoon.Internals.configuration.analyst){Kameleoon.Utils.setupStoredData();this.setupVisitData();Kameleoon.API.events=[];Kameleoon.API.experiments=Kameleoon.Internals.parameters.kameleoonVariationId?[]:Kameleoon.Internals.configuration.experiments;if(Kameleoon.Internals.configuration.geolocation){var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("charset","utf-8");c.setAttribute("src","//j.maxmind.com/js/geoip.js");Kameleoon.Internals.headNode.appendChild(c);Kameleoon.API.runWhenConditionTrue(function(){return undefined!=window.geoip_country_name},function(){Kameleoon.Internals.geolocation={country:geoip_country_name(),region:geoip_region_name(),city:geoip_city()};Kameleoon.Analyst.processAllContainers()},100)}this.performSimulationMode();if(Kameleoon.API.experiments&&Kameleoon.API.experiments.length>0){for(var b in Kameleoon.Internals.parameters){if(0==b.indexOf("kameleoonAVTE-")){Kameleoon.Utils.createLocalData("kameleoonExperiment-"+b.substring("kameleoonAVTE-".length),Kameleoon.Internals.parameters[b]+"/"+new Date().getTime(),30,null,null,false)}}this.performExperiments()}}if(Kameleoon.API.personalizations&&Kameleoon.API.personalizations.length>0){this.performPersonalizations()}Kameleoon.Utils.domReady(function(){Kameleoon.Loader.enableKameleoonEditor.apply(Kameleoon.Loader);Kameleoon.Analyst.processTrackingScript.apply(Kameleoon.Analyst)})},shouldAbortSetup:function(){if(Kameleoon.Internals.parameters.kameleoonDisabled||Kameleoon.Internals.configuration.disableKameleoon){return true}if(Kameleoon.Internals.unsupportedBrowser){return true}if(Kameleoon.Internals.configuration.deprecateIE8&&Kameleoon.Internals.oldInternetExplorer){return true}if(Kameleoon.Internals.configuration.useLocalStorage&&!window.localStorage){return true}return false},setupVisitData:function(){if(Kameleoon.Gatherer&&window.localStorage){Kameleoon.Internals.gathererRun=true}if(Kameleoon.Internals.gathererRun){Kameleoon.Gatherer.run(false)}var c=Kameleoon.Internals.storedData;Kameleoon.Internals.currentTime=new Date().getTime();var b=false;if(!c.visits){c.visits=[]}if(c.visits.length<1||(Kameleoon.Internals.currentTime-c.visits[c.visits.length-1].endTime>(1000*60*20))){b=true}if(b){if(9<c.visits.length){if(!c.visits.firstTime){c.visits.firstTime=c.visits[0].startTime}c.visits.shift()}c.visits.push({startTime:Kameleoon.Internals.currentTime,pageViews:1,endTime:Kameleoon.Internals.currentTime})}else{c.visits[c.visits.length-1].pageViews=c.visits[c.visits.length-1].pageViews+1;c.visits[c.visits.length-1].endTime=Kameleoon.Internals.currentTime}Kameleoon.API.firstVisit=c.visits[0];var a=(c.visits.length-2>=0)?(c.visits.length-2):(c.visits.length-1);Kameleoon.API.currentVisit=c.visits[c.visits.length-1];Kameleoon.API.previousVisit=c.visits[a];Kameleoon.API.visits=c.visits;if(null==Kameleoon.API.currentVisit.originalReferrer){Kameleoon.API.currentVisit.originalReferrer=document.referrer}if(!Kameleoon.API.currentVisit.originalLandingPage){Kameleoon.API.currentVisit.originalLandingPage=window.location.href}Kameleoon.Utils.updateStoredData()},performSimulationMode:function(){if(Kameleoon.Internals.parameters.kameleoonSimulation){if(0==Kameleoon.Internals.parameters.kameleoonSimulation.indexOf("serverCall-")){var a="//api."+Kameleoon.Internals.DOMAIN+"/api?task=retrieveSimulationData&siteCode="+Kameleoon.Internals.siteCode+"&simulationCode="+Kameleoon.Internals.parameters.kameleoonSimulation.substring(11);var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","utf-8");b.setAttribute("src",a);Kameleoon.Internals.headNode.appendChild(b);return}Kameleoon.Internals.simulationModeData=Kameleoon.Utils.JSONParse(Kameleoon.Internals.parameters.kameleoonSimulation);this.performSimulationModeCallback(true)}else{Kameleoon.Internals.simulationModeData=Kameleoon.Utils.readLocalData("kameleoonSimulationMode","LS",true);this.performSimulationModeCallback(false)}},performSimulationModeCallback:function(f){if(f){Kameleoon.Utils.eraseLocalData("kameleoonExperiment-simulation",Kameleoon.Internals.simulationModeData.experiments[0].cookieDomain,null)}if(Kameleoon.Internals.simulationModeData){Kameleoon.Internals.simulationMode=true;Kameleoon.Internals.disableCache=true;Kameleoon.Internals.configuration.variations=[{id:"reference",name:"Reference",builtCssCodeLevel2:"",elementSets:[]}];if(!Kameleoon.API.experiments){Kameleoon.API.experiments=[]}this.targetingPanel=document.createElement("div");this.targetingPanel.id="kameleoonTargetingPanel";var e="display: block; position: fixed; bottom: 0px; padding: 6px 10px; right: 0px; width: 300px; color: #5E5E5E; background-color: #ffffff; overflow: auto; max-height: 80%; z-index: 50001; border-radius: 8px 0px 0px 0px; box-shadow: 0 0 3px #5e5e5e; font-family: Sans; font-size: 13px;";this.targetingPanel.style.cssText=e;for(var d=0,b=Kameleoon.Internals.simulationModeData.experiments.length;d<b;++d){var h=Kameleoon.Internals.simulationModeData.experiments[0];var g=h.variations;if(!Kameleoon.Internals.simulationModeData.chosenVariation){for(var c=0,a=g.length;c<a;++c){h.variation={id:g[c].id};this.loadVariationData(h,true)}Kameleoon.Utils.domReady(function(){Kameleoon.Loader.displayVariationSelectionPopup.apply(Kameleoon.Loader)});delete (h.variation)}else{Kameleoon.API.experiments.push(Kameleoon.Utils.clone(h))}}}if(Kameleoon.Internals.parameters.kameleoonSimulation){Kameleoon.Utils.createLocalData("kameleoonSimulationMode",Kameleoon.Internals.simulationModeData,1/24,Kameleoon.Internals.simulationModeData.experiments[0].cookieDomain,"LS",true)}},performExperiments:function(){for(var d=0,c=Kameleoon.API.experiments.length;d<c;++d){var b=Kameleoon.API.experiments[d];b.targeting=undefined;b.currentTargetingSegment=Kameleoon.Utils.clone(b.targetingSegment);var e=Kameleoon.Utils.readLocalData("kameleoonRedirect-"+b.id,null,false)?true:false;e=e?true:(Kameleoon.Internals.parameters["kameleoonRedirect-"+b.id]?true:false);if(e){b.redirectProcessed=true;Kameleoon.Utils.eraseLocalData("kameleoonRedirect-"+b.id,null,null)}this.processContainer(b);if(true!==b.targeting&&b.redirectProcessed){this.performVariationAssignment(b,true);this.performTracking(b)}}if(Kameleoon.Internals.configuration.goals){for(var d=0,c=Kameleoon.Internals.configuration.goals.length;d<c;++d){if("URL"==Kameleoon.Internals.configuration.goals[d].type){var a=new RegExp(Kameleoon.Internals.configuration.goals[d].url);if(a.test(window.location.href)){Kameleoon.processConversion(Kameleoon.Internals.configuration.goals[d].id)}}if("ENGAGEMENT"==Kameleoon.Internals.configuration.goals[d].type){Kameleoon.processConversion(Kameleoon.Internals.configuration.goals[d].id)}if("PAGE_VIEWS"==Kameleoon.Internals.configuration.goals[d].type){if(Kameleoon.API.currentVisit.pageViews>=Kameleoon.Internals.configuration.goals[d].pageViews){Kameleoon.processConversion(Kameleoon.Internals.configuration.goals[d].id)}}if("TIME_SPENT"==Kameleoon.Internals.configuration.goals[d].type){if((Kameleoon.API.currentVisit.endTime-Kameleoon.API.currentVisit.startTime)>=Kameleoon.Internals.configuration.goals[d].timeSpent*1000){Kameleoon.processConversion(Kameleoon.Internals.configuration.goals[d].id)}}}}},performVariationAssignment:function(experiment,onlyRegisteredVariation){if(experiment.variation&&!onlyRegisteredVariation){return}var chosenVariationId=null,assignmentTime=null;var cookieValue=Kameleoon.Utils.readLocalData("kameleoonExperiment-"+experiment.id,null,false);if(cookieValue&&-1!=cookieValue.indexOf("/")){chosenVariationId=cookieValue.substring(0,cookieValue.indexOf("/"));assignmentTime=cookieValue.substring(cookieValue.indexOf("/")+1)}else{chosenVariationId=cookieValue}if(chosenVariationId&&-1!=chosenVariationId.indexOf("-mentalist")){chosenVariationId=chosenVariationId.replace("-mentalist","");experiment.mentalistEnabled=true}if(chosenVariationId&&assignmentTime){for(var i=0,l=experiment.variations.length;i<l;++i){if(chosenVariationId==experiment.variations[i].id&&experiment.variations[i].respoolTime>assignmentTime||("none"==chosenVariationId&&experiment.untrackedRespoolTime>assignmentTime)){chosenVariationId=null;break}}}if("none"!=chosenVariationId&&!Kameleoon.Internals.simulationMode&&!this.findVariation(chosenVariationId)){chosenVariationId=null}if(!chosenVariationId||"true"==Kameleoon.Internals.parameters.kameleoonEraseCookies){var customVariationSelectionFunction=null;if(experiment.customVariationSelectionScript){try{eval(experiment.customVariationSelectionScript)}catch(exception){}}if(experiment.mentalistDeviation){var deviationRandom=Math.random();if(deviationRandom<=experiment.mentalistDeviation){experiment.mentalistEnabled=true}}if(experiment.mentalistEnabled){var idList=[];for(var i=0,l=experiment.variations.length;i<l;++i){if("reference"!=experiment.variations[i].id){idList.push(experiment.variations[i].id)}}chosenVariationId=Kameleoon.Mentalist.computeBestActionToApply(idList);if(!chosenVariationId){chosenVariationId="reference"}}else{if(customVariationSelectionFunction){chosenVariationId=customVariationSelectionFunction(experiment)}else{var deviationRandom=Math.random();var total=0;for(var i=0,l=experiment.variations.length;i<l;++i){total+=experiment.variations[i].deviation;if(deviationRandom<=total){chosenVariationId=experiment.variations[i].id;break}}chosenVariationId=chosenVariationId?chosenVariationId:"none"}}Kameleoon.Utils.createLocalData("kameleoonExperiment-"+experiment.id,chosenVariationId+(experiment.mentalistEnabled?"-mentalist":"")+"/"+new Date().getTime(),experiment.cookieDuration?experiment.cookieDuration:30,experiment.cookieDomain,null,false);if(experiment.kameleoonTracking&&"true"==Kameleoon.Internals.parameters.kameleoonEraseCookies){Kameleoon.Utils.eraseLocalData("kameleoonExperimentTracking-"+experiment.id,experiment.cookieDomain,null)}}this.associateContainerAndVariation(experiment,chosenVariationId,onlyRegisteredVariation?"REGISTERED_VARIATION":"BOTH")},performPersonalizations:function(){for(var c=0,a=Kameleoon.API.personalizations.length;c<a;++c){var b=Kameleoon.API.personalizations[c];b.targeting=undefined;b.currentTargetingSegment=Kameleoon.Utils.clone(b.targetingSegment);var d=b.variation?b.variation.id:"reference";this.associateContainerAndVariation(b,d,"BOTH")}for(var c=0,a=Kameleoon.API.personalizations.length;c<a;++c){if(false!==Kameleoon.API.personalizations[c].targeting){this.processContainer(Kameleoon.API.personalizations[c])}}},processAllContainers:function(){for(var b=0,a=Kameleoon.API.experiments.length;b<a;++b){this.processContainer(Kameleoon.API.experiments[b])}for(var b=0,a=Kameleoon.API.personalizations.length;b<a;++b){this.processContainer(Kameleoon.API.personalizations[b])}},processContainer:function(a){this.processContainerStep(a);if(!Kameleoon.Internals.domReady&&!a.domReadyCallback){a.domReadyCallback=true;Kameleoon.Utils.domReady(function(){Kameleoon.Internals.domReady=true;Kameleoon.Analyst.processContainerStep(a)})}},processContainerStep:function(a){this.checkTargeting(a);if(true===a.targeting){if(a.experimentContainer){this.performVariationAssignment(a,false)}if(a.variation&&a.variation.elementSets){this.processVariationCommands(a.variation);this.performTracking(a)}}},loadVariationData:function(b,a){var f=b.variation.id;if(a){sessionStorage.removeItem("kameleoonVariation"+f)}var d=sessionStorage.getItem("kameleoonVariation"+f);if(d){Kameleoon.Internals.configuration.variations.push(Kameleoon.Utils.JSONParse(d));Kameleoon.Analyst.associateContainerAndVariation(b,f,"BOTH");return}if(!Kameleoon.Internals.requestedVariations[f]){Kameleoon.Internals.requestedVariations[f]={containers:[]};if("reference"!=f){var c="//static."+Kameleoon.Internals.DOMAIN+"/css/customers/"+Kameleoon.Internals.siteCode+"/"+Kameleoon.Internals.memberCode+"/";if(b.simulationMode&&b.multiVariateTest){c+="simulation/"+f+"-data.js"}else{c+=f+"/data.js"}if(Kameleoon.Internals.disableCache){c+="?cache="+Kameleoon.Utils.obtainRandomString(16)}var e=document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("charset","utf-8");e.setAttribute("src",c);Kameleoon.Internals.headNode.appendChild(e)}}if(a){Kameleoon.Internals.requestedVariations[f].simulation=true}else{Kameleoon.Internals.requestedVariations[f].containers.push(b)}},checkTargeting:function(container){if(undefined!==container.targeting){return}var targetingConditions=container.currentTargetingSegment;if(!targetingConditions){targetingConditions=[]}for(var i=0,l=targetingConditions.length;i<l;++i){var currentCondition=targetingConditions[i];var includeResult=null;var excludeResult=false;for(var j=0,m=currentCondition.subconditions.length;j<m;++j){var currentSubcondition=currentCondition.subconditions[j];var currentSubconditionResult=true;var originalReferrer=Kameleoon.API.currentVisit.originalReferrer;var originalLandingPage=Kameleoon.API.currentVisit.originalLandingPage;switch(currentCondition.type){case"EVENT":currentSubconditionResult=undefined;for(var k=0,n=Kameleoon.API.events.length;k<n;++k){if(currentSubcondition.value==Kameleoon.API.events[k]){currentSubconditionResult=true;break}}break;case"GEOLOCATION":if(!Kameleoon.Internals.geolocation){currentSubconditionResult=undefined;break}if((currentSubcondition.country&&Kameleoon.Internals.geolocation.country!=currentSubcondition.country)||(currentSubcondition.region&&Kameleoon.Internals.geolocation.region!=currentSubcondition.region)||(currentSubcondition.city&&Kameleoon.Internals.geolocation.city!=currentSubcondition.city)){currentSubconditionResult=false}break;case"COMPETITORS":if(Kameleoon.Internals.gathererRun){currentSubconditionResult=undefined;var visitedCompetitors=Kameleoon.Gatherer.obtainFieldFromStoredData("competitorsVisitedByVisitor");var competitorsData=Kameleoon.Internals.configuration.Gatherer.competitors;for(var k=0;k<competitorsData.length;++k){for(var i=0;i<currentSubcondition.value.length;++i){if((competitorsData[k].url==currentSubcondition.value[i].url)&&visitedCompetitors[k]){currentSubconditionResult=true}}}}break;case"DOM_ELEMENT":if(currentSubcondition.value){currentSubconditionResult=Sizzle(currentSubcondition.value).length>0}else{if(currentSubcondition.elementSets){currentSubconditionResult=this.obtainElements(currentSubcondition.elementSets,false,false,null).length>0}}if(!Kameleoon.Internals.domReady&&!currentSubconditionResult){if(!Kameleoon.Internals["enginePollerForContainer"+container.id]){Kameleoon.Internals["enginePollerForContainer"+container.id]=window.setInterval(function(){Kameleoon.Analyst.processContainer.apply(Kameleoon.Analyst,[container])},Kameleoon.Internals.PAGE_LOADING_POLL_DELAY)}currentSubconditionResult=undefined}else{window.clearInterval(Kameleoon.Internals["enginePollerForContainer"+container.id]);Kameleoon.Internals["enginePollerForContainer"+container.id]=null}break;case"PAGE_URL":var regularExpression;try{regularExpression=new RegExp(currentSubcondition.value,currentSubcondition.flags)}catch(exception){console.log("Invalid regular expression in Kameleoon Targeting: "+currentSubcondition.value);currentSubconditionResult=false;break}if(0==currentSubcondition.value.indexOf("http")||0==currentSubcondition.value.indexOf("^http")){currentSubconditionResult=regularExpression.test(window.location.href)}else{currentSubconditionResult=regularExpression.test(window.location.pathname+window.location.search)}break;case"PAGE_TITLE":var regularExpression=new RegExp(currentSubcondition.value,currentSubcondition.flags);currentSubconditionResult=regularExpression.test(document.title);break;case"JS_CODE":if(currentSubcondition.domReady&&!Kameleoon.Internals.domReady){currentSubconditionResult=undefined;break}try{currentSubconditionResult=eval("(function() {"+currentSubcondition.value+"})();")}catch(exception){currentSubconditionResult=false}if(undefined===currentSubconditionResult){window.setTimeout(function(){Kameleoon.Analyst.processContainer.apply(Kameleoon.Analyst,[container])},Kameleoon.Internals.PAGE_LOADING_POLL_DELAY)}break;case"COOKIE":var cookieValue=Kameleoon.Utils.readLocalData(currentSubcondition.name,"COOKIE",false);if(currentSubcondition.value){var regularExpression=new RegExp(currentSubcondition.value,currentSubcondition.flags);currentSubconditionResult=regularExpression.test(cookieValue)}else{currentSubconditionResult=(cookieValue!=null)}break;case"BROWSER_LANGUAGE":var browserLanguage=(navigator.language)?navigator.language:navigator.userLanguage;currentSubconditionResult=(browserLanguage.substring(0,2)==currentSubcondition.value);break;case"BROWSER":var information=Kameleoon.Utils.parseBrowserVersion();currentSubconditionResult=(information.name==currentSubcondition.value);if(currentSubconditionResult&&currentSubcondition.version){switch(currentSubcondition.operator){case"EXACT":currentSubconditionResult=(information.version==currentSubcondition.version);break;case"LOWER":currentSubconditionResult=(information.version<currentSubcondition.version);break;case"GREATER":currentSubconditionResult=(information.version>currentSubcondition.version);break}}break;case"DEVICE_TYPE":var tabletStrings=["ipad","tablet","sch-i800","xoom","playbook","kindle"];var mobileStrings=["midp","240x320","blackberry","netfront","nokia","panasonic","portalmmm","sharp","sie-","sonyericsson","symbian","windows ce","benq","mda","mot-","opera mini","philips","pocket pc","sagem","samsung","sda","sgh-","vodafone","xda","palm","iphone","ipod","android"];var mobile=false;var tablet=false;var userAgent=navigator.userAgent.toLowerCase();for(var k=0,n=tabletStrings.length;k<n;++k){if(-1!=userAgent.indexOf(tabletStrings[k])){tablet=true}}if(-1!=userAgent.indexOf("android")&&-1!=userAgent.indexOf("mobile")){tablet=true}for(var k=0,n=mobileStrings.length;k<n;++k){if(-1!=userAgent.indexOf(mobileStrings[k])){mobile=true}}var deviceType=tablet?"TABLET":(mobile?"PHONE":"DESKTOP");currentSubconditionResult=(deviceType==currentSubcondition.value);break;case"NEW_VISITORS":var newVisitor=(1==Kameleoon.API.visits.length);currentSubconditionResult=("NEW"==currentSubcondition.value)?newVisitor:!newVisitor;break;case"VISITS":currentSubconditionResult=(Kameleoon.API.visits.length>=currentSubcondition.value);break;case"SAME_DAY_VISITS":var sameDayVisits=-1;var currentYear=new Date().getFullYear();var currentMonth=new Date().getMonth();var currentDay=new Date().getDay();for(var k=0,n=Kameleoon.API.visits.length;k<n;++k){if(currentYear==new Date(Kameleoon.API.visits[k].startTime).getFullYear()&&currentMonth==new Date(Kameleoon.API.visits[k].startTime).getMonth()&&currentDay==new Date(Kameleoon.API.visits[k].startTime).getDay()){++sameDayVisits}}currentSubconditionResult=(sameDayVisits>=currentSubcondition.value);break;case"FIRST_VISIT":currentSubconditionResult=(Kameleoon.API.firstVisit==Kameleoon.API.currentVisit||(Kameleoon.Internals.currentTime-currentSubcondition.value*24*60*60*1000>=Kameleoon.API.firstVisit.endTime));break;case"LAST_VISIT":currentSubconditionResult=(Kameleoon.API.previousVisit==Kameleoon.API.currentVisit||(Kameleoon.Internals.currentTime-currentSubcondition.value*24*60*60*1000>=Kameleoon.API.previousVisit.endTime));break;case"PAGE_VIEWS":currentSubconditionResult=(Kameleoon.API.currentVisit.pageViews>=currentSubcondition.value);break;case"PREVIOUS_PAGE":var regularExpression=new RegExp(currentSubcondition.value,currentSubcondition.flags);currentSubconditionResult=regularExpression.test(document.referrer);break;case"LANDING_PAGE":var regularExpression=new RegExp(currentSubcondition.value,currentSubcondition.flags);currentSubconditionResult=regularExpression.test(originalLandingPage);break;case"ORIGIN_TYPE":switch(currentSubcondition.value){case"SEO":var regularExpression=new RegExp("https?://([^/]*)(google|bing|yahoo|yandex|baidu)([^/]*)/");currentSubconditionResult=regularExpression.test(originalReferrer);currentSubconditionResult=currentSubconditionResult&&(-1==originalLandingPage.indexOf("utm_source")&&-1==originalLandingPage.indexOf("gclid"));break;case"SEM":currentSubconditionResult=(-1!=originalLandingPage.indexOf("utm_medium=cpc")||-1!=originalLandingPage.indexOf("gclid"));break;case"AFFILIATION":var regularExpression=new RegExp("https?://([^/]*)(google|bing|yahoo|yandex|baidu)(.*)/");currentSubconditionResult=regularExpression.test(originalReferrer);currentSubconditionResult=!currentSubconditionResult&&originalReferrer!="";case"EMAIL":currentSubconditionResult=(-1!=originalLandingPage.indexOf("utm_medium=email")||-1!=originalLandingPage.indexOf("utm_medium=newsletter"));break;case"DIRECT":currentSubconditionResult=(originalReferrer=="");break}break;case"ORIGIN":var regularExpression=new RegExp(currentSubcondition.value,currentSubcondition.flags);currentSubconditionResult=regularExpression.test(originalReferrer);break;case"SEARCH_KEYWORDS":if(-1!=originalReferrer.indexOf("google")&&-1!=originalReferrer.indexOf("q=")){var searchQuery=originalReferrer.substring(originalReferrer.indexOf("q="));searchQuery=searchQuery.substring(0,"&").replaceAll("+"," ");var regularExpression=new RegExp(currentSubcondition.value,currentSubcondition.flags);currentSubconditionResult=regularExpression.test(searchQuery)}break}var temporaryResult=currentSubcondition.include?includeResult:excludeResult;switch(currentSubconditionResult){case undefined:temporaryResult=(null===temporaryResult)?undefined:(currentSubcondition.include?temporaryResult:((temporaryResult===true)?true:undefined));break;case true:temporaryResult=true;break;case false:temporaryResult=(null===temporaryResult)?false:temporaryResult;break}if(currentSubcondition.include){includeResult=temporaryResult}else{excludeResult=temporaryResult}}switch(includeResult){case undefined:currentCondition.result=excludeResult?false:undefined;break;case true:case null:currentCondition.result=(undefined===excludeResult)?undefined:(!excludeResult);break;case false:currentCondition.result=false;break}}var i=0,result=true;while(targetingConditions&&i<targetingConditions.length){if(undefined!==targetingConditions[i].result){result=(result===undefined)?(targetingConditions[i].result?undefined:false):(result&&targetingConditions[i].result);targetingConditions.splice(i,1);i=0}else{++i;result=(result===false)?false:undefined}}container.targeting=result;if(false===container.targeting){this.associateContainerAndVariation(container,"reference","VARIATION");this.removeCSSStyleSheet(container)}if(Kameleoon.Internals.simulationMode){Kameleoon.Loader.refreshTargetingPanel()}},processVariationCommands:function(a){if(!a.immediateCommandsProcessed&&!Kameleoon.Internals.editorMode){this.processVariationImmediateCommands(a)}if(Kameleoon.Internals.domReady&&!a.domReadyCommandsProcessed){this.processVariationDomReadyCommands(a)}},processVariationImmediateCommands:function(d){Kameleoon.API.currentContainer=d.container;if(d.redirections){for(var c=0,a=d.redirections.length;c<a;++c){if(!d.redirections[c].scope||new RegExp(d.redirections[c].scope).test(window.location.href)){if(d.redirections[c].additionalParameters){if(-1==window.location.search.indexOf(d.redirections[c].string)){if("#"!=d.redirections[c].string[0]){Kameleoon.API.processRedirect(window.location.protocol+"//"+window.location.hostname+((!window.location.port)?"":":"+window.location.port)+window.location.pathname+(window.location.search+((-1==window.location.search.indexOf("?"))?"?":"&")+d.redirections[c].string)+window.location.hash)}else{window.location.replace(window.location.protocol+"//"+window.location.hostname+((!window.location.port)?"":":"+window.location.port)+window.location.pathname+window.location.search+d.redirections[c].string)}}}else{var e=d.redirections[c].string;if(d.redirections[c].keepParameters){e+=(-1!=e.indexOf("?"))?window.location.search.replace("?","&"):window.location.search}Kameleoon.API.processRedirect(e)}}}}if(d.forceNoFlicker){var b="";for(var c=0,a=d.elementSets.length;c<a;++c){b+=((0!=c)?", ":"")+d.elementSets[c].selector}Kameleoon.API.forceNoFlicker(b)}this.addCSSStyleSheet(d,null);if(d.javaScriptCode&&!d.javaScriptCode.afterDOMReady){Kameleoon.Utils.callJavaScriptCode(d.javaScriptCode.code)}if(!Kameleoon.Internals.domReady){Kameleoon.Internals["enginePollerForVariation"+d.id]=window.setInterval(function(){Kameleoon.Analyst.setupDOMStructure.apply(Kameleoon.Analyst,[d,true,false,false])},Kameleoon.Internals.PAGE_LOADING_POLL_DELAY)}d.immediateCommandsProcessed=true},processVariationDomReadyCommands:function(c){var a=c.container;if(c.elementSets&&(!a||a.targeting)){this.setupDOMStructure(c,false,c.permanentRefreshActive,c.editionMode)}if(c.javaScriptCode&&c.javaScriptCode.afterDOMReady&&!c.permanentRefreshActive){Kameleoon.API.currentContainer=c.container;Kameleoon.Utils.callJavaScriptCode(c.javaScriptCode.code)}if(c.forceNoFlicker&&!c.permanentRefreshActive){var b=document.getElementById("kameleoonPageLoading");if(b){b.parentNode.removeChild(b)}}if(Kameleoon.Internals["enginePollerForVariation"+c.id]&&!c.permanentRefreshActive){window.clearInterval(Kameleoon.Internals["enginePollerForVariation"+c.id]);Kameleoon.Internals["enginePollerForVariation"+c.id]=null}if(c.permanentRefresh&&!Kameleoon.Internals["enginePollerForVariation"+c.id]){delete (c.permanentRefresh);c.permanentRefreshActive=true;Kameleoon.Internals["enginePollerForVariation"+c.id]=window.setInterval(function(){Kameleoon.Analyst.processVariationDomReadyCommands.apply(Kameleoon.Analyst,[c])},Kameleoon.Internals.PAGE_LOADED_POLL_DELAY)}c.domReadyCommandsProcessed=true},processTrackingScript:function(){if(Kameleoon.Internals.configuration.trackingScript&&!Kameleoon.Internals.trackingScriptProcessed&&!Kameleoon.Internals.editorMode){Kameleoon.Internals.trackingScriptProcessed=true;Kameleoon.Utils.domReady(function(){try{Kameleoon.Internals.engineStep="DOM_READY";eval(Kameleoon.Internals.configuration.trackingScript)}catch(exception){}})}},performTracking:function(a){if(!a.experimentContainer){this.trackPersonalization(a)}else{this.trackExperiment(a)}},trackExperiment:function(experiment){if(!experiment.experimentContainer||experiment.trackingPerformed||experiment.simulationMode||!experiment.registeredVariation||!experiment.registeredVariation.elementSets){return}var variation=experiment.registeredVariation;if(experiment.mentalistEnabled){variation.name+=" (Predicteo)"}if(!Kameleoon.Internals.configuration.unlimitedUsage&&!Kameleoon.Utils.readLocalData("kameleoonExperimentCounter-"+experiment.id,null,false)){var url="//server1.counter.kameleoon.com/_.gif?siteCode="+Kameleoon.Internals.siteCode+"&anniversaryDay="+Kameleoon.Internals.configuration.anniversaryDay;Kameleoon.Utils.performBeaconServerCall(url);Kameleoon.Utils.createLocalData("kameleoonExperimentCounter-"+experiment.id,"true",30,null,null,false)}if(experiment.googleAnalyticsTracking){this.processGoogleAnalyticsTracking(experiment)}if(experiment.atInternetTracking){this.processATInternetTracking(experiment)}if(experiment.adobeOmnitureTracking){this.processAdobeOmnitureTracking(experiment)}if(experiment.webtrendsTracking){this.processWebtrendsTracking(experiment)}if(experiment.eulerianTracking){this.processEulerianTracking(experiment)}if(experiment.kameleoonTracking){this.processKameleoonTracking(experiment)}if(Kameleoon.Internals.gathererRun&&"reference"!=variation.id){Kameleoon.Gatherer.trackAction(variation.id,experiment.mentalistEnabled?true:false)}if(experiment.heatMapTracking){if(document.addEventListener){document.addEventListener("mousedown",function(event){Kameleoon.Analyst.processHeatMapClick.apply(Kameleoon.Analyst,[experiment,event])},true)}}if(experiment.javaScriptTracking){try{eval(experiment.javaScriptTracking)}catch(exception){}}experiment.trackingPerformed=true},processGoogleAnalyticsTracking:function(b){window._gaq=window._gaq||[];var c=(undefined!=window._gaq._createAsyncTracker);if(!c&&b.googleAnalyticsTracking.eventCallDelayed){window.setTimeout(function(){Kameleoon.Analyst.processGoogleAnalyticsTracking.apply(Kameleoon.Analyst,[b])},150);return}var a=b.googleAnalyticsTracking.tracker?(b.googleAnalyticsTracking.tracker+"."):"";if(window.google_tag_manager){if(c&&window._gat&&window._gat._getTrackers().length>0){a=window._gat._getTrackers()[0]._getName()+"."}else{for(var e=0;e<window._gaq.length;++e){if(window._gaq[e][0]&&0==window._gaq[e][0].indexOf("gtm")){a=window._gaq[e][0].substring(0,window._gaq[e][0].indexOf(".")+1);break}}}}if(!c){window._gaq.push=this.gaqPush}if(b.googleAnalyticsTracking.domainName){window._gaq.push([a+"_setDomainName",b.googleAnalyticsTracking.domainName],true)}if(b.googleAnalyticsTracking.customVariable&&b.googleAnalyticsTracking.customVariable<6){var f=[a+"_setCustomVar",b.googleAnalyticsTracking.customVariable,b.name,b.registeredVariation.name.substring(0,80),2];window._gaq.push(f,true)}if(b.googleAnalyticsTracking.pageViewTracking){var d=b.name.replace(/\//gi,"-");window._gaq.push([a+"_trackPageview","/Kameleoon/"+d+"/"+encodeURIComponent(b.registeredVariation.name)],true)}else{if(c||b.googleAnalyticsTracking.eventTracking){var f=[a+"_trackEvent","Kameleoon",b.name,b.registeredVariation.name,undefined,true];window._gaq.push(f,true)}}},gaqPush:function(e,b){Kameleoon.Internals.gaFreezingCommandIndex=window._gaq.length;for(var c=0,a=window._gaq.length;c<a;++c){var d=window._gaq[c];if(d[0]&&(-1!=d[0].indexOf("_trackPageview")||-1!=d[0].indexOf("_trackEvent")||-1!=d[0].indexOf("_setCustomVar"))){Kameleoon.Internals.gaFreezingCommandIndex=c;break}}if(!e[0]||(-1!=e[0].indexOf("_trackPageview")||-1!=e[0].indexOf("_trackEvent")||(-1!=e[0].indexOf("_setCustomVar")&&!b)||Kameleoon.Internals.firstExternalFreezingCommand)){window._gaq.splice(window._gaq.length,0,e);if(!b&&e[0]){Kameleoon.Internals.firstExternalFreezingCommand=true}}else{window._gaq.splice(Kameleoon.Internals.gaFreezingCommandIndex,0,e)}},processATInternetTracking:function(experiment){var atInternetAlreadyLoaded=(undefined!==window.xt_mvt);var escapedExperimentName=experiment.name.replace(/\//gi,"-");var experimentData=experiment.id+"["+escapedExperimentName+"]-0-"+experiment.registeredVariation.id+"["+encodeURIComponent(experiment.registeredVariation.name)+"]";var mvtData=[];var experimentDataParameter="&abmvc="+experimentData;if(experiment.factors){var k=0;for(var i=0,l=experiment.factors.length;i<l;++i){++k;var regExp=new RegExp(experiment.factors[i].name+"_(.*?)( /|\\.)");var match=regExp.exec(experiment.registeredVariation.name);var versionId=0;if(match){for(var j=0,m=experiment.factors[i].values.length;j<m;++j){if(match[1]==experiment.factors[i].values[j]){versionId=j+1;break}}}var version=match?(versionId+"["+match[1]+"]"):"0[Reference]";mvtData.push((experiment.id*10000+k)+"["+experiment.factors[i].name+"]-"+version)}}for(var i=0,l=mvtData.length;i<l;++i){experimentDataParameter+="&abmv"+(i+1)+"="+mvtData[i]}if(atInternetAlreadyLoaded&&!experiment.atInternetTracking.forceXtCoreMissing){window.xt_mvt(window.xtpage,window.xtn2,experimentData,mvtData)}else{if(experiment.atInternetTracking.xtCoreMissingScript){var atCallURL=eval("(function() {"+experiment.atInternetTracking.xtCoreMissingScript+"})();");if(atCallURL&&document.body){var mvtHitImage=document.createElement("img");mvtHitImage.src=atCallURL+experimentDataParameter+"&type=mvt";document.body.appendChild(mvtHitImage)}else{window.setTimeout(function(){Kameleoon.Analyst.processATInternetTracking.apply(Kameleoon.Analyst,[experiment])},150)}}else{if(Kameleoon.Internals.firstAtInternetCallUsed||experiment.atInternetTracking.alwaysUseMVTCall||experiment.atInternetTracking.xtCoreMissing){window.setTimeout(function(){Kameleoon.Analyst.processATInternetTracking.apply(Kameleoon.Analyst,[experiment])},150)}else{if(null!=window.xtparam){window.xtparam+=experimentDataParameter}else{window.xtparam=experimentDataParameter}Kameleoon.Internals.firstAtInternetCallUsed=true}}}},processAdobeOmnitureTracking:function(experiment){experiment.adobeOmnitureTracking.active=true;var omnitureAlreadyLoaded=null;var omnitureObject=experiment.adobeOmnitureTracking.object?experiment.adobeOmnitureTracking.object:"s";if(experiment.adobeOmnitureTracking.callDetectionScript){omnitureAlreadyLoaded=eval("(function() {"+experiment.adobeOmnitureTracking.callDetectionScript+"})();")}else{omnitureAlreadyLoaded=(window[omnitureObject]&&undefined!=window[omnitureObject].t)}if(omnitureAlreadyLoaded){experiment.adobeOmnitureTracking.omnitureAlreadyLoaded=true;window[omnitureObject].tl(true,"o","Kameleoon Tracking")}else{if(undefined==window.s_doPlugins){window.s_doPlugins=Kameleoon.API.processOmniture}}},processWebtrendsTracking:function(b){var c=(undefined!==window.dcsMultiTrack);if(c){window.dcsMultiTrack("WT.z_NomTest_Version",b.name+"_"+variationName)}else{var a=document.createElement("meta");a.setAttribute("name","WT.z_NomTest_Version");a.setAttribute("content",b.name+"_"+variationName);Kameleoon.Internals.headNode.appendChild(a)}},processEulerianTracking:function(a){window.EA_data=window.EA_data||[];if(undefined!==window.EA_collector){}else{window.EA_data.push("kameleoonSlot-"+a.eulerianTracking.userCentricParameter);window.EA_data.push(a.name+" / "+a.registeredVariation.name)}},processKameleoonTracking:function(b){var d=b.registeredVariation.id;var a=Kameleoon.Utils.readLocalData("kameleoonExperimentTracking-"+b.id,null,true);if(!a){b.noEngagement=true;if(!this.applyRedirect){var c=Kameleoon.Internals.ABTESTING_TRACKING_URL+"siteCode="+Kameleoon.Internals.siteCode+"&memberCode="+Kameleoon.Internals.memberCode+"&experimentId="+b.id+"&variationId="+d+"&event=visit";Kameleoon.Utils.performBeaconServerCall(c);if(Kameleoon.Internals.gathererRun){Kameleoon.Gatherer.trackData(["experimentId","variationId"],[b.id,d])}Kameleoon.Utils.createLocalData("kameleoonExperimentTracking-"+b.id,{visit:true},b.cookieDuration?b.cookieDuration:30,b.cookieDomain,null,true)}}},processHeatMapClick:function(b,d){if(Kameleoon.Internals.editorMode||d.kameleoonCreated||!d.preventDefault||!document.createEvent){return}var a=d.clientX,e=d.clientY;a=a-(document.documentElement.clientWidth-b.heatMapTracking.pageWidth)*0.5;a=Math.round(a);e+=document.body.scrollTop;var c="//server1.heatmap.kameleoon.com/_.gif?x="+a+"&y="+e+"&siteCode="+Kameleoon.Internals.siteCode+"&experimentId="+b.id+"&variationId="+b.registeredVariation.id;Kameleoon.Utils.performBeaconServerCall(c)},trackPersonalization:function(a){if(a.api){Kameleoon.API.activePersonalizations.push(a.name)}},addCSSStyleSheet:function(d,f){var a=d.builtCssCodeLevel2;var c=f?f:document;var e="kameleoonStyleSheet"+(d.container?("-"+d.container.id):"");if(!a||(f&&f.getElementById(e))){return}var b=c.createElement("style");b.className="KameleoonStyleSheet";b.setAttribute("id",e);b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");b.setAttribute("media","screen");if(b.styleSheet){b.styleSheet.cssText=a}else{b.appendChild(document.createTextNode(a))}if(f){c.getElementsByTagName("head")[0].appendChild(b,c.getElementsByTagName("head")[0].firstChild)}else{Kameleoon.Internals.headNode.insertBefore(b,Kameleoon.Internals.headNode.firstChild)}if(d.container){d.container.loadedCSSStyleSheet=b}},removeCSSStyleSheet:function(a){if(a.loadedCSSStyleSheet){var b=a.loadedCSSStyleSheet.id.replace("kameleoonStyleSheet-","");if(-1==b.indexOf(",")){Kameleoon.Internals.headNode.removeChild(a.loadedCSSStyleSheet);a.loadedCSSStyleSheet=null}else{a.loadedCSSStyleSheet.id="kameleoonStyleSheet-"+b.replace(new RegExp(a.id+",?"),"")}}},findVariation:function(b){for(var a=0;a<Kameleoon.Internals.configuration.variations.length;++a){if(b==Kameleoon.Internals.configuration.variations[a].id){return Kameleoon.Internals.configuration.variations[a]}}return null},associateContainerAndVariation:function(a,g,f){var d=true;var e=true;if("REGISTERED_VARIATION"==f){e=false}if("VARIATION"==f){d=false}if("none"==g){a.trackingPerformed=true;g="reference";d=false}var c=this.findVariation(g);if(a&&d){a.registeredVariation={id:g}}if(c){var b=Kameleoon.Utils.clone(c);if(a){if(d){a.registeredVariation=b}if(e){a.variation=b}b.container=a;if(a.experimentContainer){b.experiment=a}else{b.personalization=a}}}else{a.variation={id:g}}if(a.variation&&!a.variation.elementSets){this.loadVariationData(a)}},setupDOMStructure:function(e,h,d,c){var b=null;var g=[];Kameleoon.Internals.pageElementSets=Kameleoon.Internals.pageElementSets.concat(e.elementSets);b=this.performHTMLReplacements(e.elementSets,h,d,e);if(c){editor.services.EngineService.getInstance().refreshCustomizableElements();editor.services.EngineService.getInstance().updateDecorationElement()}for(var f=0,a=b.length;f<a;++f){if(h&&(b[f].options.userPosition&&"RELATIVE"!=b[f].options.userPosition.positionMode)){continue}g.push(b[f])}this.powerElements(g);return g?g.length>0:false},performHTMLReplacements:function(c,e,d,g){var h=null;var f=true;while(f){h=this.obtainElements(c,e,d,g);if(0==h.length){break}h=h.sort(function(k,i){var m=Kameleoon.Utils.obtainDepth(k.element),l=Kameleoon.Utils.obtainDepth(i.element);return m<l?-1:m>l?1:0});h=this.removeDuplicates(h);f=false;for(var b=0,a=h.length;b<a;++b){var j=h[b].options;if(j.htmlContent){f=this.changeHTMLContent(h[b],j.htmlContent,false,true)||f}if(j.replaceHtmlContent){f=this.changeHTMLContent(h[b],j.replaceHtmlContent,true,true)||f}}}for(var b=0,a=c.length;b<a;++b){if(c[b]&&c[b].removeSelector){c[b]=null}}return h},obtainElements:function(h,u,w,f){var k,v,t=[];if(this.timeOutCallback){window.clearTimeout(this.timeOutCallback)}for(var s=0,p=h.length;s<p;++s){if(null===h[s]){continue}var e=h[s].selector;var d=h[s].options;var c=null,a=document;if(d.context){c=Sizzle(d.context);if(!c[0]){continue}c=c[0].contentWindow.document;a=c;this.addCSSStyleSheet(f,c)}if(d.scopeURL&&!new RegExp(d.scopeURL).test(window.location.href)){k=[]}else{if(d.customSelector||d.autoGeneratedSelector||d.contentSelector){k=Sizzle(e,c);if(d.kameleoonClass){for(var q=0,o=k.length;q<o;++q){if(-1==k[q].className.indexOf("KameleoonClass"+d.kameleoonClass)){this.saveElementOriginalData(k[q]);k[q].className+=(k[q].className?" ":"")+"KameleoonClass"+d.kameleoonClass}}}if(0==k.length){if(d.kameleoonId){var b=document.getElementById("kameleoonId"+d.kameleoonId);k=b?[b]:[]}if(d.kameleoonClass){k=Sizzle(".KameleoonClass"+d.kameleoonClass,null)}}}else{switch(e.charAt(0)){case"#":var n=e.substr(1);k=[a.getElementById(e.substr(1))];if(!k[0]){var b=null;if(h[s].element){b=h[s].element}else{if(0==n.indexOf("kameleoonElement")&&a.body){if(d.domOperation){var g=Sizzle(d.domReference,c)[0];if(g){b=a.createElement("div");h[s].element=b}}else{b=a.createElement("div");a.body.appendChild(b)}}}if(b){b.id=n;k=[b]}else{k=[]}}break;default:k=Sizzle(e,c);break}}}var r=false;v=[];for(var q=0,o=k.length;q<o;++q){if(!k[q].getAttribute("kameleoon")){if(!u||undefined===d.htmlContent||Kameleoon.Utils.checkElementLoaded(k[q])){if(d.userPosition&&d.userPosition.referenceElement&&!Sizzle(d.userPosition.referenceElement)[0]){continue}if(d.domOperation){var g=Sizzle(d.domReference,c)[0];k[q].domTargetElement=g;if(u||w){if((!Kameleoon.Utils.checkElementLoaded(k[q])&&0!=d.selector.indexOf("#kameleoonElement"))||!Kameleoon.Utils.checkElementLoaded(k[q].domTargetElement)){continue}r=true}}v.push({element:k[q],options:Kameleoon.Utils.clone(d)})}}}h[s].removeSelector=r||(w&&0<k.length&&d.autoGeneratedSelector);t=t.concat(v)}return t},powerElements:function(c){for(var b=0,a=c.length;b<a;++b){this.powerElement(c[b].element,c[b].options)}},powerElement:function(f,c){if(Kameleoon.Internals.configuration.specifyElements&&(-1==f.className.indexOf("Kameleoon"))){return}this.saveElementOriginalData(f);f.kameleoonData.powered=true;f.setAttribute("kameleoon","active");if(c.kameleoonId&&!f.id){f.id="kameleoonId"+c.kameleoonId}if(c.kameleoonClass){for(var e=0,a=c.kameleoonClass.length;e<a;++e){if(-1==f.className.indexOf("KameleoonClass"+c.kameleoonClass[e])){f.className+=(f.className?" ":"")+"KameleoonClass"+c.kameleoonClass[e]}}}if(c.keepSpace){this.reserveSpaceForElement(f)}if(c.domOperation){var b=f.domTargetElement;if(!b){var d=null;if(c.context){d=Sizzle(c.context);d=d[0]?d[0].contentWindow.document:null}b=Sizzle(c.domReference,d)[0]}this.processDomOperation(f,b,c.domOperation)}this.processUserPosition(f,f,c.userPosition,"inline"!=Kameleoon.Utils.obtainComputedStyle(f).display);this.setupNoLinkPropagation(c,f);this.processSpecialCases(f);this.processLinks(f,c.href)},saveElementOriginalData:function(a){if(a.kameleoonData&&a.kameleoonData.originalData){return}if(!a.kameleoonData){a.kameleoonData={}}a.kameleoonData.originalData={};if(a.style.cssText){a.kameleoonData.originalData.style=a.style.cssText}if(a.id){a.kameleoonData.originalData.id=a.id}if(a.className){a.kameleoonData.originalData.className=a.className}if(a.parentNode){a.kameleoonData.originalData.parentNode=a.parentNode}if(a.nextSibling){a.kameleoonData.originalData.nextSibling=a.nextSibling}},reserveSpaceForElement:function(a){if(!a.kameleoonData||!a.kameleoonData.originalData){this.saveElementOriginalData(a)}if(!a.kameleoonData.originalData.originalNode){var h=true;for(var e=0,b=a.childNodes.length;e<b;++e){var d=a.childNodes[e];if(d.nodeType==1){h=false}}var g=a.cloneNode(h);var f;if(Kameleoon.Internals.internetExplorer&&!Kameleoon.Internals.modernInternetExplorer){f=a.offsetWidth-1}else{f=a.getBoundingClientRect().width}Kameleoon.Utils.setStyle(g,"width",f+"px",false);if(!h){Kameleoon.Utils.setStyle(g,"height",a.clientHeight+"px",false)}var c=Kameleoon.Utils.obtainComputedStyle(a);Kameleoon.Utils.setStyle(g,"float",c.cssFloat,false);Kameleoon.Utils.setStyle(g,"margin-top",c.marginTop,false);Kameleoon.Utils.setStyle(g,"margin-bottom",c.marginBottom,false);Kameleoon.Utils.setStyle(g,"margin-left",c.marginLeft,false);Kameleoon.Utils.setStyle(g,"margin-right",c.marginRight,false);Kameleoon.Utils.setStyle(g,"overflow",c.overflow,false);Kameleoon.Utils.setStyle(g,"visibility","hidden",false);g.removeAttribute("id");g.removeAttribute("class");a.parentNode.insertBefore(g,a);a.kameleoonData.originalData.originalNode=g;Kameleoon.Utils.setStyle(a,"position","absolute",false)}},removeDuplicates:function(f){var a=[];for(var e=0,b=f.length;e<b;++e){if(undefined==f[e].element.kameleoonUnique){f[e].element.kameleoonUnique=a.length;if(f[e].options.kameleoonClass){f[e].options.kameleoonClass=[f[e].options.kameleoonClass]}a.push(f[e])}else{var c=f[e].element.kameleoonUnique;for(var d in f[e].options){if("kameleoonClass"==d){if(!a[c].options[d]){a[c].options[d]=[]}a[c].options[d].push(f[e].options[d])}else{a[c].options[d]=f[e].options[d]}}}}for(var e=0,b=a.length;e<b;++e){if(undefined!==a[e].element.kameleoonUnique){a[e].element.kameleoonUnique=undefined;a[e].element.removeAttribute("kameleoonUnique")}}return a},setupNoLinkPropagation:function(a,b){if(a.noLinkPropagation){b.setAttribute("kData","nlp")}},changeHTMLContent:function(f,h,e,c){var d=f.element;var a=false;var g=("input"==d.nodeName.toLowerCase()&&("button"==d.getAttribute("type")||"submit"==d.getAttribute("type")||"text"==d.getAttribute("type")));var b=g?d.value:d.innerHTML;this.saveElementOriginalData(d);if(undefined===d.kameleoonData.originalData.htmlContent){d.kameleoonData.originalData.htmlContent=b;a=true}if((!c||a)&&b!=h){if(e){f.element=this.replaceHTMLContent(d,h,f.options)}else{if(g){d.value=h}else{d.innerHTML=h}}}return a},replaceHTMLContent:function(e,g,c){if(Kameleoon.Utils.checkElementIsInDocument(e,c)){if(0==g.indexOf("kameleoonInputImage:")){this.saveElementOriginalData(e);e.kameleoonData.originalData.imgSrc=e.src;e.src=g.replace("kameleoonInputImage:","");return e}var a=document.createElement(e.parentNode.nodeName.toLowerCase());a.innerHTML=g;var d=false;while(a.childNodes.length>0){var b=a.childNodes[0];b.kameleoonData=e.kameleoonData;b.kameleoonData.originalData.replacedElement=e;if(!d){d=b;b.id=e.id;var f=e.className.match(/(KameleoonClass[^\s]*)/);if(f){b.className+=(b.className?" ":"")+f[1]}if(c.kameleoonId){b.id="kameleoonId"+c.kameleoonId}if(c.kameleoonClass){b.className+=(b.className?" ":"")+"KameleoonClass"+c.kameleoonClass}if((b.id||b.className)&&3==b.nodeType){return false}}e.parentNode.insertBefore(b,e)}e.parentNode.removeChild(e);return d}else{return false}},processUserPosition:function(b,e,a,d){if(a){switch(a.positionMode){case"ABSOLUTE_KEEP_SPACE":case"ABSOLUTE":if(d){var h=("ABSOLUTE_KEEP_SPACE"==a.positionMode)?b.kameleoonData.originalData.originalNode.offsetWidth:b.offsetWidth;if(h){Kameleoon.Utils.setStyle(e,"width",h+"px",("th"!=e.nodeName.toLowerCase()&&"td"!=e.nodeName.toLowerCase()))}}var g=null;var c=false;if(a.referenceElement){g=Sizzle(a.referenceElement)[0];c=true}if(!g){g=document.body}if(g&&e.parentNode!=g){e.parentNode.removeChild(e);g.appendChild(e);if(!e.kameleoonData){e.kameleoonData={}}e.kameleoonData.moved=true}Kameleoon.Utils.setStyle(e,"position","absolute",false);var f=Kameleoon.Utils.obtainComputedStyle(e).left.replace("px","")/a.referenceWidth;Kameleoon.Utils.setStyle(e,"left",Math.round(f*g.offsetWidth)+"px",true);if(c){this.addRelativePositionToReferenceElement(g)}break;case"RELATIVE":Kameleoon.Utils.setStyle(e,"position","",false)}Kameleoon.Utils.setStyle(e,"top","",false);Kameleoon.Utils.setStyle(e,"left","",false);Kameleoon.Utils.setStyle(e,"right","",false);Kameleoon.Utils.setStyle(e,"bottom","",false);if(!d){Kameleoon.Utils.setStyle(e,"width","",false)}Kameleoon.Utils.setStyle(e,"height","",false)}},processDomOperation:function(d,c,a){if(!c){return}var g=d.parentNode;var b=c.parentNode;var f=d.nextSibling;while(b){if(b==d){return}b=b.parentNode}b=c.parentNode;try{if(g){g.removeChild(d)}switch(a){case"SWAP":b.insertBefore(d,c);b.removeChild(c);if(f){try{g.insertBefore(c,f)}catch(e){g=d.parentNode;f=d.nextSibling;g.insertBefore(c,f)}}else{g.appendChild(c)}if(!d.kameleoonData){d.kameleoonData={}}this.saveElementOriginalData(c);if("left"==Kameleoon.Utils.obtainComputedStyle(d)["float"]&&"right"==Kameleoon.Utils.obtainComputedStyle(c)["float"]){d.style["float"]="right";c.style["float"]="left"}else{if("right"==Kameleoon.Utils.obtainComputedStyle(d)["float"]&&"left"==Kameleoon.Utils.obtainComputedStyle(c)["float"]){d.style["float"]="left";c.style["float"]="right"}}d.kameleoonData.swapTargetElement=c;break;case"INSERT_BEFORE":b.insertBefore(d,c);break;case"INSERT_AFTER":if(c.nextSibling){b.insertBefore(d,c.nextSibling)}else{b.appendChild(d)}break;case"INSERT_AS_CHILD":if(0==c.childNodes.length){c.appendChild(d)}else{c.insertBefore(d,c.firstChild)}break}}catch(e){}},addRelativePositionToReferenceElement:function(a){if("absolute"!=Kameleoon.Utils.obtainComputedStyle(a).position&&document.body!=a){Kameleoon.Utils.setStyle(a,"position","relative",false)}},processSpecialCases:function(a){if("body"==a.nodeName.toLowerCase()&&-1!=Kameleoon.Utils.obtainComputedStyle(a).background.indexOf("linear-gradient")){a.style.backgroundRepeat="no-repeat";if(window.innerHeight-document.documentElement.scrollHeight>0){a.style.backgroundAttachment="fixed"}}},processLinks:function(b,a){if("a"==b.nodeName.toLowerCase()&&a){b.href=a}},processLinkPropagation:function(e,d){var b=e.childNodes;for(var a=0;a<b.length;++a){if(b[a].getAttribute&&"nlp"!=b[a].getAttribute("kData")){if("a"==b[a].nodeName.toLowerCase()){var c=b[a].style.cssText;b[a].style.cssText=(c?(c+";"):"")+d}this.processLinkPropagation(b[a],d)}}},refreshForScreenResize:function(){for(var a=Kameleoon.poweredNodes.length,b=a-1;b>=0;--b){this.processUserPosition(Kameleoon.poweredNodes[b].originalElement,Kameleoon.poweredNodes[b].baseElement,data?data.userPosition:null,true)}}};Kameleoon.Utils={JSONParse:function(string){return(((typeof JSON!="undefined")&&JSON.parse)?JSON.parse(string):eval("("+string+")"))},JSONStringify:function(a){var b=null;if((typeof JSON!="undefined"&&JSON.stringify)&&("[]"===JSON.stringify([])||!a.toJSON)){if("[]"!==JSON.stringify([])){delete (Array.prototype.toJSON)}b=JSON.stringify(a)}else{if(a.toJSON&&"[]"===[].toJSON()){b=a.toJSON()}}return b},performBeaconServerCall:function(c,b,a){var d=new XMLHttpRequest();if(d.withCredentials!==undefined||!XDomainRequest){d.open("GET",c,true);if(b){d.onreadystatechange=b}if(a){d.onerror=a}d.send()}else{d=new XDomainRequest();d.open("get",c);d.send()}},runProtectedFunction:function(b){try{b()}catch(a){if(typeof console!=="undefined"&&console.log){console.log("An error occurred in one of your Kameleoon custom JavaScript functions, please check your code.");console.log(a,a.message)}Kameleoon.processPageLoaded()}},parseBrowserVersion:function(){var d=navigator.userAgent;var e=navigator.appName;var f=""+parseFloat(navigator.appVersion);var a=parseInt(navigator.appVersion,10);var c,b;if((c=d.indexOf("Opera"))!=-1){e="Opera";f=d.substring(c+6);if((c=d.indexOf("Version"))!=-1){f=d.substring(c+8)}}else{if((c=d.indexOf("MSIE"))!=-1){e="IE";f=d.substring(c+5)}else{if((c=d.indexOf("Chrome"))!=-1){e="CHROME";f=d.substring(c+7)}else{if((c=d.indexOf("Safari"))!=-1){e="SAFARI";f=d.substring(c+7);if((c=d.indexOf("Version"))!=-1){f=d.substring(c+8)}}else{if((c=d.indexOf("Firefox"))!=-1){e="FIREFOX";f=d.substring(c+8)}else{e="OTHER"}}}}}if((b=f.indexOf(";"))!=-1){f=f.substring(0,b)}if((b=f.indexOf(" "))!=-1){f=f.substring(0,b)}a=parseInt(""+f,10);if(isNaN(a)){f=""+parseFloat(navigator.appVersion);a=parseInt(navigator.appVersion,10)}return{name:e,version:a}},obtainComputedStyle:function(a){if(window.getComputedStyle){var b=getComputedStyle(a,"");return b?b:{backgroundImage:"none"}}else{return a.currentStyle}},setStyle:function(c,f,e,b){Kameleoon.Analyst.saveElementOriginalData(c);var g=c.style.cssText;if(g){g=g.replace(/^\s+|\s+$/g,"");var a=new RegExp("(^|;)(\\s*"+f+"(.*?);)");g=g.replace(a,"$1");if(g){if(g.lastIndexOf(";")<(g.length-2)){g=g+";"}if(g.lastIndexOf(" ")!=(g.length-1)&&e){g=g+" "}}}else{g=""}var d=g+(e?(f+": "+e+(b?" !important;":";")):"");c.style.cssText=d},setupStoredData:function(){var a=localStorage.getItem("kameleoonData");var d=a?this.decodeString(a):"{}";var b;try{b=d?this.JSONParse(d):{}}catch(c){d=a;b=d?this.JSONParse(d):{}}Kameleoon.Internals.storedData=b},updateStoredData:function(){var b=Kameleoon.Internals.storedData;var c=b?this.JSONStringify(b):this.JSONStringify({});var a=c?this.encodeString(c):this.encodeString("{}");localStorage.setItem("kameleoonData",a)},encodeString:function(d){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var a="";var l,j,g,k,h,f,e;var c=0;d=this.encodeUTF8(d);while(c<d.length){l=d.charCodeAt(c++);j=d.charCodeAt(c++);g=d.charCodeAt(c++);k=l>>2;h=((l&3)<<4)|(j>>4);f=((j&15)<<2)|(g>>6);e=g&63;if(isNaN(j)){f=e=64}else{if(isNaN(g)){e=64}}a=a+b.charAt(k)+b.charAt(h)+b.charAt(f)+b.charAt(e)}return a},decodeString:function(d){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var a="";var l,j,g;var k,h,f,e;var c=0;d=d.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<d.length){k=b.indexOf(d.charAt(c++));h=b.indexOf(d.charAt(c++));f=b.indexOf(d.charAt(c++));e=b.indexOf(d.charAt(c++));l=(k<<2)|(h>>4);j=((h&15)<<4)|(f>>2);g=((f&3)<<6)|e;a=a+String.fromCharCode(l);if(f!=64){a=a+String.fromCharCode(j)}if(e!=64){a=a+String.fromCharCode(g)}}a=this.decodeUTF8(a);return a},encodeUTF8:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},decodeUTF8:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b},createLocalData:function(a,h,i,f,c,b){var j=("LS"==c)?true:(("COOKIE"==c)?false:Kameleoon.Internals.configuration.useLocalStorage);if(j){var g={value:h,date:Kameleoon.Internals.currentTime+(i*24*60*60*1000)};localStorage.setItem(a,this.JSONStringify(g));return}var k;if(i){var d=new Date();d.setTime(d.getTime()+(i*24*60*60*1000));k="; expires="+d.toGMTString()}else{k=""}if("CURRENT_HOST"!=f){if(!f){f=window.location.hostname;var e=/[^\.]+\.([a-z][a-z]\.|)[^\.]+$/.exec(f);if(e){f="."+e[0]}}k+="; domain="+f}document.cookie=a+"="+(b?this.JSONStringify(h):h)+k+"; path=/"},readLocalData:function(a,d,b){var k=("LS"==d)?true:(("COOKIE"==d)?false:Kameleoon.Internals.configuration.useLocalStorage);if(k){var f=localStorage?localStorage.getItem(a):null;if(!f){return null}f=this.JSONParse(f);if(Kameleoon.Internals.currentTime>f.date){localStorage.removeItem(a);return null}return f.value}var j=a+"=";var e=document.cookie.split(";");for(var g=0;g<e.length;++g){var h=e[g];while(" "==h.charAt(0)){h=h.substring(1,h.length)}if(0==h.indexOf(j)){var l=h.substring(j.length,h.length);if(b){l=this.JSONParse(l)}return l}}return null},eraseLocalData:function(a,b,d){var c=("LS"==d)?true:(("COOKIE"==d)?false:Kameleoon.Internals.configuration.useLocalStorage);if(c){localStorage.removeItem(a)}else{this.createLocalData(a,"",-1,b,d,false)}},obtainRandomString:function(e){var b="0123456789abcdefghijklmnopqrstuvwxyz";var a="";for(var c=0;c<e;++c){var d=Math.floor(Math.random()*b.length);a+=b.substring(d,d+1)}return a},parseParameters:function(){var e={};var a=window.location.search.substring(1);if(a){a=a.split("&");for(var d=0,b=a.length;d<b;++d){var f=a[d].split("=");try{e[decodeURIComponent(f[0])]=f[1]?decodeURIComponent(f[1]):null}catch(c){e[unescape(f[0])]=f[1]?unescape(f[1]):null}}}a=window.location.hash.substring(1);if(Kameleoon.Internals.firefox){a=window.location.toString().substring(window.location.toString().indexOf("#")+1)}if(a){a=a.split("&");for(var d=0,b=a.length;d<b;++d){var f=a[d].split("=");try{e[decodeURIComponent(f[0])]=f[1]?decodeURIComponent(f[1]):null}catch(c){e[unescape(f[0])]=f[1]?unescape(f[1]):null}}}return e},addParameterToURL:function(a,d,c){if(c){return(a+((-1==a.indexOf("#"))?"#":"&")+d)}var b="";if(-1!=a.indexOf("#")){b=a.substr(a.indexOf("#"));a=a.substr(0,a.indexOf("#"))}a+=((-1==a.indexOf("?"))?"?":"&")+d+b;return a},domReady:function(b){if("complete"==document.readyState||"loaded"==document.readyState||("interactive"==document.readyState&&!Kameleoon.Internals.internetExplorer)){return b()}if(!Kameleoon.Internals.internetExplorer&&document.addEventListener){return document.addEventListener("DOMContentLoaded",b,false)}var a=false;var c=function(){if(!a){a=true;b()}};(function(){try{document.documentElement.doScroll("left");c()}catch(d){setTimeout(arguments.callee,50)}})()},obtainDepth:function(b){var a=0;while(!(b.parentNode===null)){++a;b=b.parentNode}return a},collectionToArray:function(d){var a=[];for(var c=0,b=d.length;c<b;++c){a.push(d[c])}return a},getLocale:function(){if(navigator){if(navigator.language){return navigator.language}else{if(navigator.browserLanguage){return navigator.browserLanguage}else{if(navigator.systemLanguage){return navigator.systemLanguage}else{if(navigator.userLanguage){return navigator.userLanguage}}}}}},callJavaScriptCode:function(b){var a=document.createElement("script");a.type="text/javascript";if(Kameleoon.Internals.oldInternetExplorer){var c=document.createElement("div");c.appendChild(a);a.text=b}else{Kameleoon.Internals.headNode.appendChild(a);if(Kameleoon.Internals.internetExplorer){a.text=b}else{a.appendChild(document.createTextNode(b))}}},checkElementLoaded:function(a){if(!a||!a.parentNode){return false}return((a.nextSibling)?true:this.checkElementLoaded(a.parentNode))},checkElementIsInDocument:function(c,a){var b=null,d=document;if(a.context){b=Sizzle(a.context);if(b[0]){d=b[0].contentWindow.document}}while(c&&c!=d.documentElement){if(c.parentNode){c=c.parentNode}else{return false}}return true},clone:function(a){return this.JSONParse(this.JSONStringify(a))}};Kameleoon.Loader={enableKameleoonEditorListener:function(){if(!this.editorListenerEnabled){this.editorListenerEnabled=true;var a=function(b){Kameleoon.Loader.listenKeys.call(Kameleoon.Loader,b)};if(document.addEventListener){document.addEventListener("keyup",a,false)}else{document.attachEvent("onkeyup",a)}}},listenKeys:function(a){if(a.shiftKey){if(113==a.keyCode){Kameleoon.Internals.editorMode=true;this.enableKameleoonEditor()}if(115==a.keyCode&&(Kameleoon.Internals.simulationMode||Kameleoon.Internals.parameters.kameleoonVariationSelection)){this.displayVariationSelectionPopup()}}},enableKameleoonEditor:function(){Kameleoon.Internals.domReady=true;if(Kameleoon.Analyst.targetingPanel&&!Kameleoon.Analyst.targetingPanel.parentNode){document.body.appendChild(Kameleoon.Analyst.targetingPanel)}if(!(true===Kameleoon.Internals.configuration.disableEditorMode)){this.enableKameleoonEditorListener()}if(Kameleoon.Internals.editorMode&&(!(true===Kameleoon.Internals.configuration.disableEditorMode))&&!Kameleoon.Internals.editorEnabled){Kameleoon.Internals.editorEnabled=true;if("frameset"==document.body.nodeName.toLowerCase()){alert("This page uses a frameset. Please install the Kameleoon script on the main frame of your page (and not on the page hosting the frameset).");return}var b=document.createElement("div");b.id="kameleoonRegion";b.className="KameleoonProtected";b.style.display="block";document.body.appendChild(b);this.setupLoadingDialog(b);this.refreshProgressBar(Math.round(Kameleoon.Internals.QOOXDOO_ESTIMATED_LOADING_TIME/(Kameleoon.Internals.QOOXDOO_ESTIMATED_LOADING_TIME+Kameleoon.Internals.SERVER_CALL_ESTIMATED_LOADING_TIME+Kameleoon.Internals.GUI_ESTIMATED_LOADING_TIME)*100));var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("charset","utf-8");a.setAttribute("src",Kameleoon.Internals.JS_EDITOR_URL);Kameleoon.Internals.headNode.appendChild(a)}},displayVariationSelectionPopup:function(){if(document.getElementById("kameleoonVariationSelectionPopup")||!Kameleoon.API.experiments){return}var h=document.createElement("div");h.id="kameleoonVariationSelectionPopup";var b="display: block; position: fixed; top: 100px; padding: 15px 20px; right: 150px; width: 400px; color: #5e5e5e; background-color: #ffffff; overflow: auto; max-height: 80%; z-index: 50002; box-shadow: 0 0 3px #5e5e5e; font-family: Tahoma; font-size: 13px;";h.style.cssText=b;var g="";if(Kameleoon.Internals.simulationMode){g+='<div style="padding-bottom: 15px; border-bottom: 1px #000000 solid; font-size: 14px;" >You are in simulation mode. Please choose a variation:</div>';for(var f=0,d=Kameleoon.Internals.simulationModeData.experiments.length;f<d;++f){var a=Kameleoon.Internals.simulationModeData.experiments[f];g+='<div class="KameleoonSimulation" style="text-align: center; margin: 5px 0px; font-size: 16px;"><span style="margin-left: 8px; font-weight: bold;" >'+a.name+'</span></div><div style="padding-bottom: 15px; border-bottom: 1px #000000 solid;"><select name="'+a.id+'">';for(var e=0,c=a.variations.length;e<c;++e){g+='<option value="'+a.variations[e].id+'">'+a.variations[e].name+"</option>"}g+="</select></div>"}g+="<br />"}g+='<div style="padding-bottom: 15px; border-bottom: 1px #000000 solid; font-size: 14px;" >'+(Kameleoon.Internals.simulationMode?"You can also choose a variation for the following running experiments (this is optional):":"You can choose a variation for the following running experiments:")+"</div>";for(var f=0,d=Kameleoon.API.experiments.length;f<d;++f){if(!Kameleoon.API.experiments[f].simulationMode){g+='<div class="KameleoonProduction" style="text-align: center; margin: 5px 0px; font-size: 16px;">Experiment <span style="margin-left: 8px; font-weight: bold;" >'+Kameleoon.API.experiments[f].name+'</span></div><div style="padding-bottom: 15px; border-bottom: 1px #000000 solid;"><select name="'+Kameleoon.API.experiments[f].id+'">';for(var e=0,c=Kameleoon.API.experiments[f].variations.length;e<c;++e){g+='<option value="'+Kameleoon.API.experiments[f].variations[e].id+'"';if(Kameleoon.API.experiments[f].registeredVariation&&(Kameleoon.API.experiments[f].registeredVariation.id==Kameleoon.API.experiments[f].variations[e].id)){g+=' selected="selected"'}g+=">"+Kameleoon.API.experiments[f].variations[e].name+"</option>"}g+="</select></div>"}}g+='<div style="text-align: center;"><div>';if(Kameleoon.Internals.simulationMode){g+='<input style="margin: 10px 75px 10px 10px;" id="kameleoonSimulationButton" type="button" value="Exit simulation" />'}g+='<input style="margin: 10px;" id="kameleoonVariationSelectionButton" type="button" value="OK, Go" /></div><div>(Later, you can press Shift + F4 to bring up this popup again and change your variations)</div></div>';h.innerHTML=g;document.body.appendChild(h);var n=Sizzle("#kameleoonVariationSelectionPopup .KameleoonSimulation select");for(var f=0,d=n.length;f<d;++f){n[f].domain=Kameleoon.Internals.simulationModeData.experiments[f].cookieDomain}n=Sizzle("#kameleoonVariationSelectionPopup .KameleoonProduction select");for(var f=0,d=n.length;f<d;++f){n[f].domain=Kameleoon.API.experiments[f].cookieDomain}var k=document.getElementById("kameleoonSimulationButton");if(document.addEventListener){if(k){k.addEventListener("click",this.exitSimulation)}document.getElementById("kameleoonVariationSelectionButton").addEventListener("click",this.setVariations)}else{if(k){k.attachEvent("onclick",this.exitSimulation)}document.getElementById("kameleoonVariationSelectionButton").attachEvent("onclick",this.setVariations)}},refreshTargetingPanel:function(){var c='<div style="text-align: center; padding-bottom: 3px; margin-bottom: 5px; border-bottom: 1px #000000 solid; font-size: 14px;" >Kameleoon Targeting</div>';for(var b=0,a=Kameleoon.API.experiments.length;b<a;++b){c+='<div style="margin: 0px; font-size: 16px;"><span style="margin-right: 15px; font-weight: bold;" >'+Kameleoon.API.experiments[b].name+"</span>";if(Kameleoon.API.experiments[b].targeting){c+='<span style="color: green; text-shadow: 0.1em 0.1em 0.1em #555555;">ACTIVE</span>'}else{if(false===Kameleoon.API.experiments[b].targeting){c+='<span style="color: red; text-shadow: 0.1em 0.1em 0.2em #555555;">INACTIVE</span>'}else{c+='<span style="color: black; text-shadow: 0.1em 0.1em 0.2em #555555;">Undefined yet</span>'}}c+="</div>"}Kameleoon.Analyst.targetingPanel.innerHTML=c},exitSimulation:function(){Kameleoon.Utils.eraseLocalData("kameleoonSimulationMode",Kameleoon.Internals.simulationModeData.experiments[0].cookieDomain,"LS");window.location.hash="";window.location.reload()},setVariations:function(){var c=Sizzle("#kameleoonVariationSelectionPopup select");for(var b=0,a=c.length;b<a;++b){Kameleoon.Utils.createLocalData("kameleoonExperiment-"+c[b].name,c[b].options[c[b].selectedIndex].value,1/24,c[b].domain,null,false)}if(Kameleoon.Internals.simulationModeData){Kameleoon.Internals.simulationModeData.chosenVariation=true;Kameleoon.Utils.createLocalData("kameleoonSimulationMode",Kameleoon.Internals.simulationModeData,1/24,Kameleoon.Internals.simulationModeData.experiments[0].cookieDomain,"LS",true)}window.location.hash="";window.location.reload()},setupLoadingDialog:function(g){if(Kameleoon.Analyst.targetingPanel){document.body.removeChild(Kameleoon.Analyst.targetingPanel)}var c='<div id="kameleoonQxDialogs" style="width: 1024px; height: 768px; top: 50%; margin-top: -400px; left: 50%; margin-left: -512px; position: fixed; z-index: 200007;" ></div>';c+='<div id="kameleoonQxOverlay" style="width: 100%; height: 100%; top: 0px; left: 0px; position: fixed; z-index: 200006; background-color: #D5D5D5; opacity: 0.7;" ></div>';c+='<div id="kameleoonLoadingDialog" style="background-color: white; -moz-box-shadow: 0px 0px 5px #888; -webkit-box-shadow: 0px 0px 5px #888; box-shadow: 0px 0px 5px #888; width: 450px; font-family: Open-Sans, Arial, Sans; color: #5e5e5e;';c+='top: 50%; left: 50%; margin-top: -100px; margin-left: -250px; position: fixed; z-index: 200006; padding: 15px; font-size: 12pt;" ></div>';g.innerHTML=c;var f=document.createElement("div");f.style.marginBottom="10px";f.style.textAlign="center";var e=document.createElement("div");var d="height: 18px; margin: auto; text-align: center; position: relative; border: 2px #5e5e5e solid; width: 150px;";e.setAttribute("style",d);var b=document.createElement("div");b.id="kameleoonProgressBarBackground";d="background-color: #66A806; position: absolute; height: 18px;";b.setAttribute("style",d);var h=document.createElement("span");h.id="kameleoonProgressBarLabel";d="z-index: 1; position: relative; line-height: 18px;";h.setAttribute("style",d);e.appendChild(b);e.appendChild(h);switch(Kameleoon.Utils.getLocale()){case"fr":f.innerHTML="Kameleoon est en cours de chargement, merci de patienter...";break;default:f.innerHTML="Kameleoon is loading, please wait..."}var a=document.getElementById("kameleoonLoadingDialog");a.appendChild(f);a.appendChild(e);this.loadingCounter=0;this.loadingBarStep=Math.round((Kameleoon.Internals.QOOXDOO_ESTIMATED_LOADING_TIME+Kameleoon.Internals.SERVER_CALL_ESTIMATED_LOADING_TIME+Kameleoon.Internals.GUI_ESTIMATED_LOADING_TIME)/100)},refreshProgressBar:function(a){if(this.loadingCounter<=a){document.getElementById("kameleoonProgressBarBackground").style.width=this.loadingCounter+"%";document.getElementById("kameleoonProgressBarLabel").innerHTML=this.loadingCounter+"%";++this.loadingCounter;setTimeout("Kameleoon.Loader.refreshProgressBar("+a+")",this.loadingBarStep);if(this.loadingCounter>60){document.getElementById("kameleoonProgressBarLabel").style.color="white"}}}};(function(ay,q){var F,l,v,Q,T,ae,aE,R,ah,K,w,aq,al,az,k,O,at="sizzle"+-(new Date()),S=ay.document,aB={},aC=0,am=0,d=I(),ar=I(),P=I(),af=false,M=function(){return 0},ax=typeof q,Z=1<<31,av=[],aw=av.pop,V=av.push,b=av.push,u=av.slice,j=av.indexOf||function(aG){var aF=0,e=this.length;for(;aF<e;aF++){if(this[aF]===aG){return aF}}return -1},c="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",x="[\\x20\\t\\r\\n\\f]",a="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",U=a.replace("w","w#"),ao="\\["+x+"*("+a+")"+x+"*(?:([*^$|!~]?=)"+x+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+U+")|)|)"+x+"*\\]",s=":("+a+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ao.replace(3,8)+")*)|.*)\\)|)",z=new RegExp("^"+x+"+|((?:^|[^\\\\])(?:\\\\.)*)"+x+"+$","g"),C=new RegExp("^"+x+"*,"+x+"*"),J=new RegExp("^"+x+"*([>+~]|"+x+")"+x+"*"),aj=new RegExp(x+"*[+~]"),B=new RegExp("="+x+"*([^\\]'\"]*)"+x+"*\\]","g"),ab=new RegExp(s),ac=new RegExp("^"+U+"$"),ak={ID:new RegExp("^#("+a+")"),CLASS:new RegExp("^\\.("+a+")"),NAME:new RegExp("^\\[name=['\"]?("+a+")['\"]?\\]"),TAG:new RegExp("^("+a.replace("w","w*")+")"),ATTR:new RegExp("^"+ao),PSEUDO:new RegExp("^"+s),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+x+"*(even|odd|(([+-]|)(\\d*)n|)"+x+"*(?:([+-]|)"+x+"*(\\d+)|))"+x+"*\\)|)","i"),"boolean":new RegExp("^(?:"+c+")$","i"),needsContext:new RegExp("^"+x+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+x+"*((?:-\\d)?\\d*)"+x+"*\\)|)(?=[^-]|$)","i")},Y=/^[^{]+\{\s*\[native \w/,aa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,h=/^(?:input|select|textarea|button)$/i,t=/^h\d$/i,W=/'|\\/g,A=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,an=function(e,aF){var i="0x"+aF-65536;return i!==i?aF:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)};try{b.apply((av=u.call(S.childNodes)),S.childNodes);av[S.childNodes.length].nodeType}catch(L){b={apply:av.length?function(i,e){V.apply(i,u.call(e))}:function(aH,aG){var e=aH.length,aF=0;while((aH[e++]=aG[aF++])){}aH.length=e-1}}}function N(e){return Y.test(e+"")}function I(){var e,i=[];return(e=function(aF,aG){if(i.push(aF+=" ")>v.cacheLength){delete e[i.shift()]}return(e[aF]=aG)})}function r(e){e[at]=true;return e}function m(i){var aG=K.createElement("div");try{return !!i(aG)}catch(aF){return false}finally{aG=null}}function D(aM,aF,aQ,aS){var aR,aJ,aK,aO,aP,aI,aH,e,aG,aN;if((aF?aF.ownerDocument||aF:S)!==K){ah(aF)}aF=aF||K;aQ=aQ||[];if(!aM||typeof aM!=="string"){return aQ}if((aO=aF.nodeType)!==1&&aO!==9){return[]}if(aq&&!aS){if((aR=aa.exec(aM))){if((aK=aR[1])){if(aO===9){aJ=aF.getElementById(aK);if(aJ&&aJ.parentNode){if(aJ.id===aK){aQ.push(aJ);return aQ}}else{return aQ}}else{if(aF.ownerDocument&&(aJ=aF.ownerDocument.getElementById(aK))&&O(aF,aJ)&&aJ.id===aK){aQ.push(aJ);return aQ}}}else{if(aR[2]){b.apply(aQ,aF.getElementsByTagName(aM));return aQ}else{if((aK=aR[3])&&aB.getElementsByClassName&&aF.getElementsByClassName){b.apply(aQ,aF.getElementsByClassName(aK));return aQ}}}}if(aB.qsa&&(!al||!al.test(aM))){e=aH=at;aG=aF;aN=aO===9&&aM;if(aO===1&&aF.nodeName.toLowerCase()!=="object"){aI=o(aM);if((aH=aF.getAttribute("id"))){e=aH.replace(W,"\\$&")}else{aF.setAttribute("id",e)}e="[id='"+e+"'] ";aP=aI.length;while(aP--){aI[aP]=e+p(aI[aP])}aG=aj.test(aM)&&aF.parentNode||aF;aN=aI.join(",")}if(aN){try{b.apply(aQ,aG.querySelectorAll(aN));return aQ}catch(aL){}finally{if(!aH){aF.removeAttribute("id")}}}}}return aA(aM.replace(z,"$1"),aF,aQ,aS)}T=D.isXML=function(e){var i=e&&(e.ownerDocument||e).documentElement;return i?i.nodeName!=="HTML":false};ah=D.setDocument=function(e){var i=e?e.ownerDocument||e:S;if(i===K||i.nodeType!==9||!i.documentElement){return K}K=i;w=i.documentElement;aq=!T(i);aB.getElementsByTagName=m(function(aF){aF.appendChild(i.createComment(""));return !aF.getElementsByTagName("*").length});aB.attributes=m(function(aF){aF.className="i";return !aF.getAttribute("className")});aB.getElementsByClassName=m(function(aF){aF.innerHTML="<div class='a'></div><div class='a i'></div>";aF.firstChild.className="i";return aF.getElementsByClassName("i").length===2});aB.getByName=m(function(aG){aG.id=at+0;aG.appendChild(K.createElement("a")).setAttribute("name",at);aG.appendChild(K.createElement("i")).setAttribute("name",at);w.appendChild(aG);var aF=i.getElementsByName&&i.getElementsByName(at).length===2+i.getElementsByName(at+0).length;w.removeChild(aG);return aF});aB.sortDetached=m(function(aF){return aF.compareDocumentPosition(K.createElement("div"))&1});if(aB.getByName){v.find.ID=function(aH,aG){if(typeof aG.getElementById!==ax&&aq){var aF=aG.getElementById(aH);return aF&&aF.parentNode?[aF]:[]}};v.filter.ID=function(aG){var aF=aG.replace(A,an);return function(aH){return aH.getAttribute("id")===aF}}}else{v.find.ID=function(aH,aG){if(typeof aG.getElementById!==ax&&aq){var aF=aG.getElementById(aH);return aF?aF.id===aH||typeof aF.getAttributeNode!==ax&&aF.getAttributeNode("id").value===aH?[aF]:q:[]}};v.filter.ID=function(aG){var aF=aG.replace(A,an);return function(aI){var aH=typeof aI.getAttributeNode!==ax&&aI.getAttributeNode("id");return aH&&aH.value===aF}}}v.find.TAG=aB.getElementsByTagName?function(aF,aG){if(typeof aG.getElementsByTagName!==ax){return aG.getElementsByTagName(aF)}}:function(aF,aJ){var aK,aI=[],aH=0,aG=aJ.getElementsByTagName(aF);if(aF==="*"){while((aK=aG[aH++])){if(aK.nodeType===1){aI.push(aK)}}return aI}return aG};v.find.NAME=aB.getByName&&function(aF,aG){if(typeof aG.getElementsByName!==ax){return aG.getElementsByName(name)}};v.find.CLASS=aB.getElementsByClassName&&function(aG,aF){if(typeof aF.getElementsByClassName!==ax&&aq){return aF.getElementsByClassName(aG)}};az=[];al=[];if((aB.qsa=N(i.querySelectorAll))){m(function(aF){aF.innerHTML="<select><option selected=''></option></select>";if(!aF.querySelectorAll("[selected]").length){al.push("\\["+x+"*(?:value|"+c+")")}if(!aF.querySelectorAll(":checked").length){al.push(":checked")}});m(function(aG){var aF=K.createElement("input");aF.setAttribute("type","hidden");aG.appendChild(aF).setAttribute("t","");if(aG.querySelectorAll("[t^='']").length){al.push("[*^$]="+x+"*(?:''|\"\")")}if(!aG.querySelectorAll(":enabled").length){al.push(":enabled",":disabled")}aG.querySelectorAll("*,:x");al.push(",.*:")})}if((aB.matchesSelector=N((k=w.webkitMatchesSelector||w.mozMatchesSelector||w.oMatchesSelector||w.msMatchesSelector)))){m(function(aF){aB.disconnectedMatch=k.call(aF,"div");k.call(aF,"[s!='']:x");az.push("!=",s)})}al=al.length&&new RegExp(al.join("|"));az=az.length&&new RegExp(az.join("|"));O=N(w.contains)||w.compareDocumentPosition?function(aG,aF){var aI=aG.nodeType===9?aG.documentElement:aG,aH=aF&&aF.parentNode;return aG===aH||!!(aH&&aH.nodeType===1&&(aI.contains?aI.contains(aH):aG.compareDocumentPosition&&aG.compareDocumentPosition(aH)&16))}:function(aG,aF){if(aF){while((aF=aF.parentNode)){if(aF===aG){return true}}}return false};M=w.compareDocumentPosition?function(aG,aF){if(aG===aF){af=true;return 0}var aH=aF.compareDocumentPosition&&aG.compareDocumentPosition&&aG.compareDocumentPosition(aF);if(aH){if(aH&1||(!aB.sortDetached&&aF.compareDocumentPosition(aG)===aH)){if(aG===i||O(S,aG)){return -1}if(aF===i||O(S,aF)){return 1}return R?(j.call(R,aG)-j.call(R,aF)):0}return aH&4?-1:1}return aG.compareDocumentPosition?-1:1}:function(aG,aF){var aM,aJ=0,aL=aG.parentNode,aI=aF.parentNode,aH=[aG],aK=[aF];if(aG===aF){af=true;return 0}else{if(!aL||!aI){return aG===i?-1:aF===i?1:aL?-1:aI?1:R?(j.call(R,aG)-j.call(R,aF)):0}else{if(aL===aI){return f(aG,aF)}}}aM=aG;while((aM=aM.parentNode)){aH.unshift(aM)}aM=aF;while((aM=aM.parentNode)){aK.unshift(aM)}while(aH[aJ]===aK[aJ]){aJ++}return aJ?f(aH[aJ],aK[aJ]):aH[aJ]===S?-1:aK[aJ]===S?1:0};return K};D.matches=function(i,e){return D(i,null,null,e)};D.matchesSelector=function(aF,aH){if((aF.ownerDocument||aF)!==K){ah(aF)}aH=aH.replace(B,"='$1']");if(aB.matchesSelector&&aq&&(!az||!az.test(aH))&&(!al||!al.test(aH))){try{var i=k.call(aF,aH);if(i||aB.disconnectedMatch||aF.document&&aF.document.nodeType!==11){return i}}catch(aG){}}return D(aH,K,null,[aF]).length>0};D.contains=function(e,i){if((e.ownerDocument||e)!==K){ah(e)}return O(e,i)};D.attr=function(aF,e){if((aF.ownerDocument||aF)!==K){ah(aF)}var i=v.attrHandle[e.toLowerCase()],aG=i&&i(aF,e,!aq);return aG===q?aB.attributes||!aq?aF.getAttribute(e):(aG=aF.getAttributeNode(e))&&aG.specified?aG.value:null:aG};D.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};D.uniqueSort=function(aG){var aH,aI=[],e=0,aF=0;af=!aB.detectDuplicates;R=!aB.sortStable&&aG.slice(0);aG.sort(M);if(af){while((aH=aG[aF++])){if(aH===aG[aF]){e=aI.push(aF)}}while(e--){aG.splice(aI[e],1)}}return aG};function f(i,e){var aG=e&&i,aF=aG&&(~e.sourceIndex||Z)-(~i.sourceIndex||Z);if(aF){return aF}if(aG){while((aG=aG.nextSibling)){if(aG===e){return -1}}}return i?1:-1}function X(i,e,aG){var aF;return aG?q:(aF=i.getAttributeNode(e))&&aF.specified?aF.value:i[e]===true?e.toLowerCase():null}function G(i,e,aG){var aF;return aG?q:(aF=i.getAttribute(e,e.toLowerCase()==="type"?1:2))}function E(e){return function(aF){var i=aF.nodeName.toLowerCase();return i==="input"&&aF.type===e}}function g(e){return function(aF){var i=aF.nodeName.toLowerCase();return(i==="input"||i==="button")&&aF.type===e}}function ap(e){return r(function(i){i=+i;return r(function(aF,aJ){var aH,aG=e([],aF.length,i),aI=aG.length;while(aI--){if(aF[(aH=aG[aI])]){aF[aH]=!(aJ[aH]=aF[aH])}}})})}Q=D.getText=function(aI){var aH,aF="",aG=0,e=aI.nodeType;if(!e){for(;(aH=aI[aG]);aG++){aF+=Q(aH)}}else{if(e===1||e===9||e===11){if(typeof aI.textContent==="string"){return aI.textContent}else{for(aI=aI.firstChild;aI;aI=aI.nextSibling){aF+=Q(aI)}}}else{if(e===3||e===4){return aI.nodeValue}}}return aF};v=D.selectors={cacheLength:50,createPseudo:r,match:ak,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(A,an);e[3]=(e[4]||e[5]||"").replace(A,an);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){D.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+((e[7]+e[8])||e[3]==="odd")}else{if(e[3]){D.error(e[0])}}return e},PSEUDO:function(i){var e,aF=!i[5]&&i[2];if(ak.CHILD.test(i[0])){return null}if(i[4]){i[2]=i[4]}else{if(aF&&ab.test(aF)&&(e=o(aF,true))&&(e=aF.indexOf(")",aF.length-e)-aF.length)){i[0]=i[0].slice(0,e);i[2]=aF.slice(0,e)}}return i.slice(0,3)}},filter:{TAG:function(i){var e=i.replace(A,an).toLowerCase();return i==="*"?function(){return true}:function(aF){return aF.nodeName&&aF.nodeName.toLowerCase()===e}},CLASS:function(e){var i=d[e+" "];return i||(i=new RegExp("(^|"+x+")"+e+"("+x+"|$)"))&&d(e,function(aF){return i.test(aF.className||(typeof aF.getAttribute!==ax&&aF.getAttribute("class"))||"")})},ATTR:function(aF,i,e){return function(aH){var aG=D.attr(aH,aF);if(aG==null){return i==="!="}if(!i){return true}aG+="";return i==="="?aG===e:i==="!="?aG!==e:i==="^="?e&&aG.indexOf(e)===0:i==="*="?e&&aG.indexOf(e)>-1:i==="$="?e&&aG.slice(-e.length)===e:i==="~="?(" "+aG+" ").indexOf(e)>-1:i==="|="?aG===e||aG.slice(0,e.length+1)===e+"-":false}},CHILD:function(i,aH,aG,aI,aF){var aK=i.slice(0,3)!=="nth",e=i.slice(-4)!=="last",aJ=aH==="of-type";return aI===1&&aF===0?function(aL){return !!aL.parentNode}:function(aR,aP,aU){var aL,aX,aS,aW,aT,aO,aQ=aK!==e?"nextSibling":"previousSibling",aV=aR.parentNode,aN=aJ&&aR.nodeName.toLowerCase(),aM=!aU&&!aJ;if(aV){if(aK){while(aQ){aS=aR;while((aS=aS[aQ])){if(aJ?aS.nodeName.toLowerCase()===aN:aS.nodeType===1){return false}}aO=aQ=i==="only"&&!aO&&"nextSibling"}return true}aO=[e?aV.firstChild:aV.lastChild];if(e&&aM){aX=aV[at]||(aV[at]={});aL=aX[i]||[];aT=aL[0]===aC&&aL[1];aW=aL[0]===aC&&aL[2];aS=aT&&aV.childNodes[aT];while((aS=++aT&&aS&&aS[aQ]||(aW=aT=0)||aO.pop())){if(aS.nodeType===1&&++aW&&aS===aR){aX[i]=[aC,aT,aW];break}}}else{if(aM&&(aL=(aR[at]||(aR[at]={}))[i])&&aL[0]===aC){aW=aL[1]}else{while((aS=++aT&&aS&&aS[aQ]||(aW=aT=0)||aO.pop())){if((aJ?aS.nodeName.toLowerCase()===aN:aS.nodeType===1)&&++aW){if(aM){(aS[at]||(aS[at]={}))[i]=[aC,aW]}if(aS===aR){break}}}}}aW-=aF;return aW===aI||(aW%aI===0&&aW/aI>=0)}}},PSEUDO:function(aG,aF){var e,i=v.pseudos[aG]||v.setFilters[aG.toLowerCase()]||D.error("unsupported pseudo: "+aG);if(i[at]){return i(aF)}if(i.length>1){e=[aG,aG,"",aF];return v.setFilters.hasOwnProperty(aG.toLowerCase())?r(function(aJ,aL){var aI,aH=i(aJ,aF),aK=aH.length;while(aK--){aI=j.call(aJ,aH[aK]);aJ[aI]=!(aL[aI]=aH[aK])}}):function(aH){return i(aH,0,e)}}return i}},pseudos:{not:r(function(e){var i=[],aF=[],aG=ae(e.replace(z,"$1"));return aG[at]?r(function(aI,aN,aL,aJ){var aM,aH=aG(aI,null,aJ,[]),aK=aI.length;while(aK--){if((aM=aH[aK])){aI[aK]=!(aN[aK]=aM)}}}):function(aJ,aI,aH){i[0]=aJ;aG(i,null,aH,aF);return !aF.pop()}}),has:r(function(e){return function(i){return D(e,i).length>0}}),contains:r(function(e){return function(i){return(i.textContent||i.innerText||Q(i)).indexOf(e)>-1}}),lang:r(function(e){if(!ac.test(e||"")){D.error("unsupported lang: "+e)}e=e.replace(A,an).toLowerCase();return function(aF){var i;do{if((i=aq?aF.lang:aF.getAttribute("xml:lang")||aF.getAttribute("lang"))){i=i.toLowerCase();return i===e||i.indexOf(e+"-")===0}}while((aF=aF.parentNode)&&aF.nodeType===1);return false}}),target:function(e){var i=ay.location&&ay.location.hash;return i&&i.slice(1)===e.id},root:function(e){return e===w},focus:function(e){return e===K.activeElement&&(!K.hasFocus||K.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var i=e.nodeName.toLowerCase();return(i==="input"&&!!e.checked)||(i==="option"&&!!e.selected)},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4){return false}}return true},parent:function(e){return !v.pseudos.empty(e)},header:function(e){return t.test(e.nodeName)},input:function(e){return h.test(e.nodeName)},button:function(i){var e=i.nodeName.toLowerCase();return e==="input"&&i.type==="button"||e==="button"},text:function(i){var e;return i.nodeName.toLowerCase()==="input"&&i.type==="text"&&((e=i.getAttribute("type"))==null||e.toLowerCase()===i.type)},first:ap(function(){return[0]}),last:ap(function(e,i){return[i-1]}),eq:ap(function(e,aF,i){return[i<0?i+aF:i]}),even:ap(function(e,aG){var aF=0;for(;aF<aG;aF+=2){e.push(aF)}return e}),odd:ap(function(e,aG){var aF=1;for(;aF<aG;aF+=2){e.push(aF)}return e}),lt:ap(function(e,aH,aG){var aF=aG<0?aG+aH:aG;for(;--aF>=0;){e.push(aF)}return e}),gt:ap(function(e,aH,aG){var aF=aG<0?aG+aH:aG;for(;++aF<aH;){e.push(aF)}return e})}};for(F in {radio:true,checkbox:true,file:true,password:true,image:true}){v.pseudos[F]=E(F)}for(F in {submit:true,reset:true}){v.pseudos[F]=g(F)}function o(aH,aM){var i,aI,aK,aL,aJ,aF,e,aG=ar[aH+" "];if(aG){return aM?0:aG.slice(0)}aJ=aH;aF=[];e=v.preFilter;while(aJ){if(!i||(aI=C.exec(aJ))){if(aI){aJ=aJ.slice(aI[0].length)||aJ}aF.push(aK=[])}i=false;if((aI=J.exec(aJ))){i=aI.shift();aK.push({value:i,type:aI[0].replace(z," ")});aJ=aJ.slice(i.length)}for(aL in v.filter){if((aI=ak[aL].exec(aJ))&&(!e[aL]||(aI=e[aL](aI)))){i=aI.shift();aK.push({value:i,type:aL,matches:aI});aJ=aJ.slice(i.length)}}if(!i){break}}return aM?aJ.length:aJ?D.error(aH):ar(aH,aF).slice(0)}function p(aH){var aG=0,aF=aH.length,e="";for(;aG<aF;aG++){e+=aH[aG].value}return e}function y(aH,aF,aG){var e=aF.dir,aI=aG&&e==="parentNode",i=am++;return aF.first?function(aL,aK,aJ){while((aL=aL[e])){if(aL.nodeType===1||aI){return aH(aL,aK,aJ)}}}:function(aN,aL,aK){var aP,aJ,aM,aO=aC+" "+i;if(aK){while((aN=aN[e])){if(aN.nodeType===1||aI){if(aH(aN,aL,aK)){return true}}}}else{while((aN=aN[e])){if(aN.nodeType===1||aI){aM=aN[at]||(aN[at]={});if((aJ=aM[e])&&aJ[0]===aO){if((aP=aJ[1])===true||aP===l){return aP===true}}else{aJ=aM[e]=[aO];aJ[1]=aH(aN,aL,aK)||l;if(aJ[1]===true){return true}}}}}}}function aD(e){return e.length>1?function(aI,aH,aF){var aG=e.length;while(aG--){if(!e[aG](aI,aH,aF)){return false}}return true}:e[0]}function ai(e,aF,aG,aH,aK){var aI,aN=[],aJ=0,aL=e.length,aM=aF!=null;for(;aJ<aL;aJ++){if((aI=e[aJ])){if(!aG||aG(aI,aH,aK)){aN.push(aI);if(aM){aF.push(aJ)}}}}return aN}function n(aF,i,aH,aG,aI,e){if(aG&&!aG[at]){aG=n(aG)}if(aI&&!aI[at]){aI=n(aI,e)}return r(function(aT,aQ,aL,aS){var aV,aR,aN,aM=[],aU=[],aK=aQ.length,aJ=aT||H(i||"*",aL.nodeType?[aL]:aL,[]),aO=aF&&(aT||!i)?ai(aJ,aM,aF,aL,aS):aJ,aP=aH?aI||(aT?aF:aK||aG)?[]:aQ:aO;if(aH){aH(aO,aP,aL,aS)}if(aG){aV=ai(aP,aU);aG(aV,[],aL,aS);aR=aV.length;while(aR--){if((aN=aV[aR])){aP[aU[aR]]=!(aO[aU[aR]]=aN)}}}if(aT){if(aI||aF){if(aI){aV=[];aR=aP.length;while(aR--){if((aN=aP[aR])){aV.push((aO[aR]=aN))}}aI(null,(aP=[]),aV,aS)}aR=aP.length;while(aR--){if((aN=aP[aR])&&(aV=aI?j.call(aT,aN):aM[aR])>-1){aT[aV]=!(aQ[aV]=aN)}}}}else{aP=ai(aP===aQ?aP.splice(aK,aP.length):aP);if(aI){aI(null,aQ,aP,aS)}else{b.apply(aQ,aP)}}})}function au(aK){var aF,aI,aG,aJ=aK.length,aN=v.relative[aK[0].type],aO=aN||v.relative[" "],aH=aN?1:0,aL=y(function(i){return i===aF},aO,true),aM=y(function(i){return j.call(aF,i)>-1},aO,true),e=[function(aQ,aP,i){return(!aN&&(i||aP!==aE))||((aF=aP).nodeType?aL(aQ,aP,i):aM(aQ,aP,i))}];for(;aH<aJ;aH++){if((aI=v.relative[aK[aH].type])){e=[y(aD(e),aI)]}else{aI=v.filter[aK[aH].type].apply(null,aK[aH].matches);if(aI[at]){aG=++aH;for(;aG<aJ;aG++){if(v.relative[aK[aG].type]){break}}return n(aH>1&&aD(e),aH>1&&p(aK.slice(0,aH-1)).replace(z,"$1"),aI,aH<aG&&au(aK.slice(aH,aG)),aG<aJ&&au((aK=aK.slice(aG))),aG<aJ&&p(aK))}e.push(aI)}}return aD(e)}function ag(aG,aF){var aI=0,e=aF.length>0,aH=aG.length>0,i=function(aS,aM,aR,aQ,aY){var aN,aO,aT,aX=[],aW=0,aP="0",aJ=aS&&[],aU=aY!=null,aV=aE,aL=aS||aH&&v.find.TAG("*",aY&&aM.parentNode||aM),aK=(aC+=aV==null?1:Math.random()||0.1);if(aU){aE=aM!==K&&aM;l=aI}for(;(aN=aL[aP])!=null;aP++){if(aH&&aN){aO=0;while((aT=aG[aO++])){if(aT(aN,aM,aR)){aQ.push(aN);break}}if(aU){aC=aK;l=++aI}}if(e){if((aN=!aT&&aN)){aW--}if(aS){aJ.push(aN)}}}aW+=aP;if(e&&aP!==aW){aO=0;while((aT=aF[aO++])){aT(aJ,aX,aM,aR)}if(aS){if(aW>0){while(aP--){if(!(aJ[aP]||aX[aP])){aX[aP]=aw.call(aQ)}}}aX=ai(aX)}b.apply(aQ,aX);if(aU&&!aS&&aX.length>0&&(aW+aF.length)>1){D.uniqueSort(aQ)}}if(aU){aC=aK;aE=aV}return aJ};return e?r(i):i}ae=D.compile=function(e,aJ){var aG,aF=[],aI=[],aH=P[e+" "];if(!aH){if(!aJ){aJ=o(e)}aG=aJ.length;while(aG--){aH=au(aJ[aG]);if(aH[at]){aF.push(aH)}else{aI.push(aH)}}aH=P(e,ag(aI,aF))}return aH};function H(aF,aI,aH){var aG=0,e=aI.length;for(;aG<e;aG++){D(aF,aI[aG],aH)}return aH}function aA(aG,e,aH,aK){var aI,aM,aF,aN,aL,aJ=o(aG);if(!aK){if(aJ.length===1){aM=aJ[0]=aJ[0].slice(0);if(aM.length>2&&(aF=aM[0]).type==="ID"&&e.nodeType===9&&aq&&v.relative[aM[1].type]){e=(v.find.ID(aF.matches[0].replace(A,an),e)||[])[0];if(!e){return aH}aG=aG.slice(aM.shift().value.length)}aI=ak.needsContext.test(aG)?0:aM.length;while(aI--){aF=aM[aI];if(v.relative[(aN=aF.type)]){break}if((aL=v.find[aN])){if((aK=aL(aF.matches[0].replace(A,an),aj.test(aM[0].type)&&e.parentNode||e))){aM.splice(aI,1);aG=aK.length&&p(aM);if(!aG){b.apply(aH,aK);return aH}break}}}}}ae(aG,aJ)(aK,e,!aq,aH,aj.test(aG));return aH}v.pseudos.nth=v.pseudos.eq;function ad(){}ad.prototype=v.filters=v.pseudos;v.setFilters=new ad();aB.sortStable=at.split("").sort(M).join("")===at;ah();[0,0].sort(M);aB.detectDuplicates=af;m(function(aG){aG.innerHTML="<a href='#'></a>";if(aG.firstChild.getAttribute("href")!=="#"){var e="type|href|src|height|width".split("|"),aF=e.length;while(aF--){v.attrHandle[e[aF]]=G}}});m(function(aG){if(aG.getAttribute("disabled")!=null){var e=c.split("|"),aF=e.length;while(aF--){v.attrHandle[e[aF]]=X}}});if(typeof define==="function"&&define.amd&&false){define(function(){return D})}else{ay.Sizzle=D}})(window);
Kameleoon.Internals = {"requestedVariations":[],"configuration":{"siteCode":"r9u0567aww","memberCode":"0","analyst":true,"variations":[{"name":"Bloc abonnez-vous - fin offre decouverte","id":66479,"builtCssCodeLevel2":"/* START 194643 */\n\n#kameleoonId194643 {\n\theight: 600px !important;\n\twidth: 314px !important;\n\tpadding: 0px !important;\n\tmargin: 0px !important;\n}\n\n/* END 194643 */\n\n","elementSets":[{"selector":"#js_bloc_abonnez_vous > a:first-child > img:first-child","options":{"kameleoonId":194643,"autoGeneratedSelector":true,"replaceHtmlContent":"<img src=\"//static.kameleoon.com/images/customers/r9u0567aww/0/66479/19716.jpg\" />","selector":"#kameleoonId194643"}}],"permanentRefresh":true},{"id":"reference","name":"Reference","builtCssCodeLevel2":"","elementSets":[]}],"experiments":[{"id":3576,"name":"Test du bloc abonnez-vous fin offre decouverte","variations":[{"name":"Reference","id":"reference","deviation":0.5},{"name":"Bloc abonnez-vous - fin offre decouverte","id":66479,"archived":false,"deviation":0.5}],"experimentContainer":true,"multiVariateTest":false,"atInternetTracking":{"alwaysUseMVTCall":false},"targetingSegment":[{"type":"PAGE_URL","subconditions":[{"value":"^http\\://abonnes\\.lemonde\\.fr$","flags":"","include":true}]}]},{"id":4531,"name":"Ezakus","variations":[{"name":"Reference","id":"reference","deviation":0}],"experimentContainer":true,"multiVariateTest":false,"atInternetTracking":{"alwaysUseMVTCall":false},"targetingSegment":[{"type":"EVENT","subconditions":[{"value":"Ezakus_Occasional","include":true}]}]}],"personalizations":[],"unlimitedUsage":true,"trackingScript":"//JavaScript code here;\nvar kameleoonEventTrackerCallback20 = function(event) {  xt_med('C', '48', 'Liens_bloc_meme_sujet', 'N');};Kameleoon.API.runWhenElementPresent('.meme_sujet li a', function() { var elements = Sizzle('.meme_sujet li a');for (var i = 0, l = elements.length; i < l; ++i) { if (document.addEventListener) { elements[i].addEventListener('mousedown', kameleoonEventTrackerCallback20, true); } else { elements[i].attachEvent('onclick', kameleoonEventTrackerCallback20); }}; }, false, null);var kameleoonEventTrackerCallback10 = function(event) {  xt_med('C', '', 'TestAB::Lig1_Slms', 'N');};Kameleoon.API.runWhenElementPresent('#teaser_article + script + noscript + aside + aside', function() { var elements = Sizzle('#teaser_article + script + noscript + aside + aside');for (var i = 0, l = elements.length; i < l; ++i) { if (document.addEventListener) { elements[i].addEventListener('mousedown', kameleoonEventTrackerCallback10, true); } else { elements[i].attachEvent('onclick', kameleoonEventTrackerCallback10); }}; }, false, null);var kameleoonEventTrackerCallback11 = function(event) {  xt_med('C', '', 'TestAB::Lig1_Lig', 'N');};Kameleoon.API.runWhenElementPresent('#.conteneur_ligatus', function() { var elements = Sizzle('#.conteneur_ligatus');for (var i = 0, l = elements.length; i < l; ++i) { if (document.addEventListener) { elements[i].addEventListener('mousedown', kameleoonEventTrackerCallback11, true); } else { elements[i].attachEvent('onclick', kameleoonEventTrackerCallback11); }}; }, false, null);"}};
Kameleoon.Analyst.load();}